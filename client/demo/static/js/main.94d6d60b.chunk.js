(this["webpackJsonpreservierungssystem-tennis"]=this["webpackJsonpreservierungssystem-tennis"]||[]).push([[6],{121:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return l}));var r=n(33);function c(e,t,n,r){return e?e.find((function(e){return a(e,{from:t,to:n,courtId:r})})):null}function a(e,t){return e.from.isBefore(t.to,"hour")&&e.to.isAfter(t.from,"hour")&&e.courtId===t.courtId}function o(e,t){var n;return null===(n=e.find((function(e){return e.courtId===t})))||void 0===n?void 0:n.name}function i(e){for(var t={},n=("?"===e[0]?e.substr(1):e).split("&"),r=0;r<n.length;r++){var c=n[r].split("=");t[decodeURIComponent(c[0])]=decodeURIComponent(c[1]||"")}return t}function u(e,t){for(var n=parseInt(t[0]),r=parseInt(t[1]),c=e.hour(n),a=e.hour(r),o=[],i=c;i.isBefore(a,"hour");){var u=i.add(1,"hour");o.push({from:i,to:u,span:(u.hour()||24)-i.hour()}),i=u}return o}function s(e){for(var t=Object(r.a)(e,2),n=t[0],c=t[1],a=[],o=parseInt(n);o<parseInt(c);++o)a.push(o);return a}function l(e){try{return Intl.DateTimeFormat(void 0,{timeZone:e}),!0}catch(t){return!1}}},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=Object.freeze({NORMAL:1,DISABLE:2})},132:function(e,t,n){e.exports={wrapper:"Ball_wrapper__2ZIuN",ballWrapper:"Ball_ballWrapper__3raqu",large:"Ball_large__2_bXH",preloader:"Ball_preloader__38zDy",visible:"Ball_visible__1j9MH",centered:"Ball_centered__2X2XD",ball:"Ball_ball__3Ysq4",spin:"Ball_spin__3tWSR",jump:"Ball_jump__3yJc4",rotate:"Ball_rotate__uVyFJ"}},135:function(e,t,n){e.exports={menu:"MainMenu_menu__1Ez4Z",horizontal:"MainMenu_horizontal__jNPXA",stretch:"MainMenu_stretch__3BpF9",menuButton:"MainMenu_menuButton__3Ujw0"}},137:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),c=n(279),a=n(280),o=n(64),i=n(278);function u(e){var t=e.className,n=e.loading,u=e.error,s=e.success,l=e.text;return Object(r.jsxs)(i.b,{className:t,children:[n&&Object(r.jsx)(o.a,{visible:!0,spin:!0}),u&&Object(r.jsx)(c.a,{style:{color:"#ff4d4f"}}),s&&Object(r.jsx)(a.a,{style:{color:"#52c41a"}}),Object(r.jsx)("span",{children:l})]})}},138:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),c=n(277),a=n(72);function o(){return Object(r.jsx)(c.a,{style:{margin:"0 auto"},status:"warning",title:"Etwas ist schiefgelaufen.",extra:Object(r.jsx)(a.a,{type:"primary",onClick:function(){return window.location.reload()},children:"Erneut versuchen"})})}},142:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a}));var r={BASE_DATA:120,RESERVATIONS:30},c=r;function a(){Object.assign(c,r)}},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0);function c(e,t){Object(r.useEffect)((function(){var n=function(){document.hidden||e()};document.addEventListener("visibilitychange",n);var r=setInterval(n,1e3*t);return function(){document.removeEventListener("visibilitychange",n),clearInterval(r)}}),[e,t])}},198:function(e,t,n){},276:function(e,t,n){"use strict";n.r(t);var r=n(3);n(197),n(198),n(199),n(200),n(201),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(284),a=n(282),o=n(0),i=n(62),u=n(30),s=n(64),l=n(189),d=n(72);function j(){return Object(o.useEffect)((function(){if(!localStorage.getItem("notice-closed")){var e=function(){l.a.close("cookie-notice"),localStorage.setItem("notice-closed","true")};l.a.info({key:"cookie-notice",message:"Cookie Hinweis",duration:0,placement:"bottomRight",description:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:"Funktionsbedingt wird eine zu Cookies alternative Technologie verwendet."}),Object(r.jsx)("div",{children:"Es werden keine 3rd-Party oder Tracking Cookies gesetzt."})]}),onClose:e,btn:Object(r.jsx)(d.a,{type:"primary",size:"middle",onClick:e,children:"OK"}),closeIcon:" "})}}),[]),null}var b=n(138),f=n(58),O=n(29),m=n.n(O);function h(e){var t=e.noLinks,n=Object(o.useContext)(f.b).config.orgName;return Object(r.jsxs)(r.Fragment,{children:[!t&&Object(r.jsx)("p",{children:Object(r.jsx)(i.b,{to:"/legalnotice-privacy",children:"Impressum / Datenschutz"})}),Object(r.jsxs)("p",{children:["\xa9".concat(m()().format("YYYY")," ").concat(n," - v").concat("2.0.0-alpha.7"," - entwickelt von "),t?Object(r.jsx)("span",{children:"Alexander\xa0Droste"}):Object(r.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/alexdroste/reservierungssystem-tennis-v2",children:"Alexander\xa0Droste"})]})]})}var v=n(33),x=n(283),p=n(285),g=n(286),y=n(287),_=n(288),k=n(289),I=n(290),C=n(281),z=n(137),P=n(57),S=n(101),N=n.n(S),B=n(135),w=n.n(B),A=N.a.bind(w.a);function E(e){var t=e.horizontal,n=void 0!==t&&t,c=e.onClick,a=Object(o.useContext)(P.b),i=a.autoLoginState,s=a.user,l=Object(u.h)().pathname,j=Object(u.g)(),b=Object(o.useCallback)((function(e){var t=e.key;c&&c(t),l!==t&&j.push(t)}),[j,l,c]),f=Object(o.useCallback)((function(){b({key:"/login"})}),[b]),O=Object(o.useCallback)((function(){b({key:"/register"})}),[b]),m=Object(o.useCallback)((function(){b({key:"/logout"})}),[b]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(C.a,{className:A({menu:!0,horizontal:n}),mode:n?"horizontal":"inline",theme:"light",selectedKeys:[l],onClick:b,children:[Object(r.jsx)(C.a.Item,{icon:Object(r.jsx)(g.a,{}),children:"Reservierungskalender"},"/"),s&&Object(r.jsx)(C.a.Item,{icon:Object(r.jsx)(y.a,{}),children:"Meine Reservierungen"},"/my-reservations"),Object(r.jsx)(C.a.Item,{icon:Object(r.jsx)(_.a,{}),children:"Hinweise"},"/info"),(null===s||void 0===s?void 0:s.admin)&&Object(r.jsxs)(C.a.SubMenu,{title:"Verwaltung",icon:Object(r.jsx)(k.a,{}),children:[Object(r.jsx)(C.a.Item,{children:"Allgemein"},"/admin/general"),Object(r.jsx)(C.a.Item,{children:"Statistiken"},"/admin/stats"),Object(r.jsx)(C.a.Item,{children:"Nutzerverwaltung"},"/admin/users"),Object(r.jsx)(C.a.Item,{children:"Textvorlagen"},"/admin/templates")]},"/admin"),Object(r.jsx)("span",{className:w.a.stretch},"stretch"),s&&Object(r.jsx)(C.a.Item,{icon:Object(r.jsx)(I.a,{}),children:"Mein Benutzerkonto"},"/profile")]}),i.loading&&Object(r.jsx)(z.a,{className:A({menuButton:!0,horizontal:n}),loading:!0,text:"Anmeldung..."}),s&&Object(r.jsx)(d.a,{className:A({menuButton:!0,horizontal:n}),onClick:m,children:"Abmelden"}),!s&&!i.loading&&Object(r.jsx)(d.a,{className:A({menuButton:!0,horizontal:n}),onClick:f,children:"Anmelden"}),!s&&!i.loading&&Object(r.jsx)(d.a,{className:A({menuButton:!0,horizontal:n}),type:"primary",onClick:O,children:"Kostenlos Registrieren"})]})}var T=n(291),M=n(68),F=n.n(M);function R(){var e=Object(o.useContext)(f.b).config.orgName,t=Object(o.useState)(!1),n=Object(v.a)(t,2),c=n[0],i=n[1],u=Object(o.useCallback)((function(){return i(!0)}),[]),s=Object(o.useCallback)((function(){return i(!1)}),[]);return Object(r.jsxs)(a.a.Header,{className:F.a.header,children:[Object(r.jsxs)("div",{className:F.a.title,children:[Object(r.jsx)("div",{className:F.a.orgName,children:e}),Object(r.jsx)(x.a.Text,{type:"secondary",children:"Reservierungssystem"})]}),Object(r.jsx)("div",{className:F.a.horizontalMenuWrapper,children:Object(r.jsx)(E,{horizontal:!0})}),Object(r.jsxs)("div",{className:F.a.drawerMenuWrapper,children:[Object(r.jsx)(d.a,{type:"text",icon:Object(r.jsx)(T.a,{}),onClick:u}),Object(r.jsx)(p.a,{title:"".concat(e,"\nReservierungssystem"),visible:c,width:300,className:F.a.drawer,onClose:s,children:Object(r.jsx)(E,{onClick:s})})]})]})}var L=n(18),D=n(141);function q(e){var t=e.admin,n=e.children,c=Object(D.a)(e,["admin","children"]),a=Object(o.useContext)(P.b).user;return Object(r.jsx)(u.b,Object(L.a)(Object(L.a)({},c),{},{render:function(e){var c=e.location;return a?t&&!a.admin?Object(r.jsx)(u.a,{to:"/"}):n:Object(r.jsx)(u.a,{to:{pathname:"/login",state:{from:c}}})}}))}var W=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(12)]).then(n.bind(null,575)).then((function(e){return{default:e.CalendarPage}}))})),U=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(15),n.e(20)]).then(n.bind(null,577)).then((function(e){return{default:e.GeneralSettingsPage}}))})),H=Object(o.lazy)((function(){return n.e(23).then(n.bind(null,562)).then((function(e){return{default:e.InfoPage}}))})),J=Object(o.lazy)((function(){return n.e(24).then(n.bind(null,563)).then((function(e){return{default:e.LegalPrivacyPage}}))})),Y=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(18)]).then(n.bind(null,564)).then((function(e){return{default:e.LoginPage}}))})),X=Object(o.lazy)((function(){return n.e(25).then(n.bind(null,565)).then((function(e){return{default:e.LogoutPage}}))})),Z=Object(o.lazy)((function(){return n.e(26).then(n.bind(null,566)).then((function(e){return{default:e.VerifyMailPage}}))})),K=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(16)]).then(n.bind(null,567)).then((function(e){return{default:e.MyAccountPage}}))})),V=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(11)]).then(n.bind(null,582)).then((function(e){return{default:e.MyReservationsPage}}))})),G=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(17)]).then(n.bind(null,568)).then((function(e){return{default:e.RegisterPage}}))})),$=Object(o.lazy)((function(){return Promise.all([n.e(2),n.e(4),n.e(5),n.e(10),n.e(21)]).then(n.bind(null,569)).then((function(e){return{default:e.StatsPage}}))})),Q=Object(o.lazy)((function(){return Promise.all([n.e(5),n.e(13),n.e(19)]).then(n.bind(null,576)).then((function(e){return{default:e.EditTemplatesPage}}))})),ee=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(4),n.e(14),n.e(22)]).then(n.bind(null,570)).then((function(e){return{default:e.UserManagementPage}}))}));function te(){return Object(r.jsx)(o.Suspense,{fallback:Object(r.jsx)(s.a,{visible:!0,large:!0,centered:!0,spin:!0}),children:Object(r.jsxs)(u.d,{children:[Object(r.jsx)(u.b,{exact:!0,path:"/",children:Object(r.jsx)(W,{})}),Object(r.jsx)(u.b,{exact:!0,path:"/info",children:Object(r.jsx)(H,{})}),Object(r.jsx)(u.b,{exact:!0,path:"/legalnotice-privacy",children:Object(r.jsx)(J,{})}),Object(r.jsx)(u.b,{exact:!0,path:"/logout",children:Object(r.jsx)(X,{})}),Object(r.jsx)(u.b,{exact:!0,path:"/login",children:Object(r.jsx)(Y,{})}),Object(r.jsx)(u.b,{exact:!0,path:"/register",children:Object(r.jsx)(G,{})}),Object(r.jsx)(q,{admin:!0,exact:!0,path:"/admin/general",children:Object(r.jsx)(U,{})}),Object(r.jsx)(q,{admin:!0,exact:!0,path:"/admin/stats",children:Object(r.jsx)($,{})}),Object(r.jsx)(q,{admin:!0,exact:!0,path:"/admin/users",children:Object(r.jsx)(ee,{})}),Object(r.jsx)(q,{admin:!0,exact:!0,path:"/admin/templates",children:Object(r.jsx)(Q,{})}),Object(r.jsx)(q,{exact:!0,path:"/my-reservations",children:Object(r.jsx)(V,{})}),Object(r.jsx)(q,{exact:!0,path:"/profile",children:Object(r.jsx)(K,{})}),Object(r.jsx)(q,{path:"/verify-mail/:verifyToken",children:Object(r.jsx)(Z,{})}),Object(r.jsx)(u.b,{path:"*",children:Object(r.jsx)(u.a,{to:"/"})})]})})}var ne=n(84),re=n.n(ne),ce=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(9)]).then(n.bind(null,578)).then((function(e){return{default:e.KioskPage}}))})),ae=Object(o.lazy)((function(){return n.e(28).then(n.bind(null,400)).then((function(e){return{default:e.DemoControls}}))}));var oe=function(){var e=Object(o.useContext)(f.b),t=e.config,n=e.state,l=Object(o.useRef)(null);return Object(o.useEffect)((function(){(null===t||void 0===t?void 0:t.announcement)&&t.announcement!==l.current&&(l.current=t.announcement,c.a.info({className:re.a.announcement,title:"Ank\xfcndigung",centered:!0,content:t.announcement,zIndex:1200}))}),[t]),n.error?Object(r.jsx)(b.a,{}):t?Object(r.jsx)(i.a,{basename:"/tennis-court-reservation-system-v2/client/demo",children:Object(r.jsx)(a.a,{children:Object(r.jsxs)(o.Suspense,{fallback:Object(r.jsx)(s.a,{visible:!0,preloader:!0,spin:!0}),children:[Object(r.jsxs)(u.d,{children:[Object(r.jsxs)(u.b,{exact:!0,path:"/kiosk",children:[Object(r.jsx)(a.a.Content,{className:re.a.content,children:Object(r.jsx)(ce,{})}),Object(r.jsx)(a.a.Footer,{className:re.a.footer,children:Object(r.jsx)(h,{noLinks:!0})})]}),Object(r.jsxs)(u.b,{path:"*",children:[Object(r.jsx)(R,{}),Object(r.jsx)(a.a.Content,{className:re.a.content,children:Object(r.jsx)(te,{})}),Object(r.jsx)(a.a.Footer,{className:re.a.footer,children:Object(r.jsx)(h,{})}),Object(r.jsx)(j,{})]})]}),Object(r.jsx)(ae,{})]})})}):Object(r.jsx)(s.a,{visible:!0,preloader:!0,spin:!0})},ie=n(20),ue=n(16),se=n.n(ue),le=n(180),de=n.n(le),je=n(181),be=n.n(je),fe=n(182),Oe=n.n(fe),me=n(186),he=n.n(me),ve=n(183),xe=n.n(ve),pe=n(184),ge=n.n(pe),ye=n(185),_e=n.n(ye),ke=n(168),Ie=n.n(ke),Ce=n(169),ze=n.n(Ce);m.a.extend(Ie.a),m.a.extend(ze.a),m.a.extend(xe.a),m.a.extend(de.a),m.a.extend(be.a),m.a.extend(Oe.a),m.a.extend(_e.a),m.a.extend(ge.a),m.a.locale("de"),n.e(27).then(n.bind(null,580)).then((function(e){e.patchFetch(),se.a.render(Object(r.jsx)(ie.b,{locale:he.a,children:Object(r.jsx)(f.a,{children:Object(r.jsx)(P.a,{children:Object(r.jsx)(oe,{})})})}),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(33),c=n(3),a=n(0),o=n.n(a),i=n(85),u=n(86),s="usertoken",l=o.a.createContext();function d(e){var t=e.children,n=Object(a.useState)(null),o=Object(r.a)(n,2),d=o[0],j=o[1],b=Object(a.useRef)(!1),f=Object(a.useCallback)((function(e){j((function(t){var n=e(t);return(null===n||void 0===n?void 0:n.token)&&(b.current?localStorage.setItem(s,n.token):sessionStorage.setItem(s,n.token)),n}))}),[]),O=Object(u.a)(i.i,f),m=Object(r.a)(O,2),h=m[0],v=m[1],x=Object(u.a)(i.j),p=Object(r.a)(x,2)[1];Object(a.useEffect)((function(){var e=sessionStorage.getItem(s)||localStorage.getItem(s);e&&!d&&v(null,{type:"token",token:e})}),[v,d]),Object(a.useEffect)((function(){h.error&&(sessionStorage.removeItem(s),localStorage.removeItem(s))}),[h]);var g=Object(a.useCallback)((function(e){b.current=e}),[]),y=Object(a.useCallback)((function(){p(null,{userId:null===d||void 0===d?void 0:d.userId}),j(null),sessionStorage.removeItem(s),localStorage.removeItem(s)}),[p,null===d||void 0===d?void 0:d.userId]),_=Object(a.useMemo)((function(){return{autoLoginState:h,logout:y,setRememberLogin:g,setUser:f,user:d}}),[h,y,g,f,d]);return Object(c.jsx)(l.Provider,{value:_,children:t})}},58:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return m}));var r=n(33),c=n(3),a=n(0),o=n.n(a),i=n(142),u=n(29),s=n.n(u),l=n(120),d=n.n(l),j=n(85),b=n(86),f=n(144),O=o.a.createContext();function m(e){var t=e.children,n=Object(a.useState)(),o=Object(r.a)(n,2),u=o[0],l=o[1],m=Object(a.useState)(),h=Object(r.a)(m,2),v=h[0],x=h[1],p=Object(a.useState)(),g=Object(r.a)(p,2),y=g[0],_=g[1],k=Object(a.useCallback)((function(e){var t=e(null),n=t.config,r=t.courts,c=t.templates;l((function(e){return d()(e,n)?e:n})),_((function(e){return d()(e,c)?e:c})),x((function(e){return d()(e,r)?e:r}))}),[]),I=Object(b.a)(j.b,k,!0),C=Object(r.a)(I,2),z=C[0],P=C[1];Object(f.a)(P,i.a.BASE_DATA),Object(a.useEffect)((function(){s.a.tz.setDefault(null===u||void 0===u?void 0:u.timeZone)}),[null===u||void 0===u?void 0:u.timeZone]);var S=Object(a.useMemo)((function(){return{config:u,courts:v,templates:y,setConfig:l,setCourts:x,setTemplates:_,state:z,reload:P}}),[u,v,y,z,P]);return Object(c.jsx)(O.Provider,{value:S,children:t})}},64:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),c=(n(0),n(101)),a=n.n(c),o=n(132),i=n.n(o),u=a.a.bind(i.a);function s(e){var t=e.centered,n=e.large,c=e.preloader,a=e.spin,o=e.visible;return Object(r.jsx)("div",{className:u({centered:t,preloader:c,spin:a,visible:o,wrapper:!0}),children:Object(r.jsx)("div",{className:u({ballWrapper:!0,large:n}),children:Object(r.jsx)("div",{className:i.a.ball})})})}},68:function(e,t,n){e.exports={header:"NavBar_header__3EbUr",title:"NavBar_title__2Ydj-",orgName:"NavBar_orgName__3TDkX",horizontalMenuWrapper:"NavBar_horizontalMenuWrapper__pOr71",drawerMenuWrapper:"NavBar_drawerMenuWrapper__15WnD",drawer:"NavBar_drawer__2Jr7L"}},84:function(e,t,n){e.exports={content:"App_content__3La4L",footer:"App_footer__29Fsv",announcement:"App_announcement__1d1pc"}},85:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return j})),n.d(t,"o",(function(){return b})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return O})),n.d(t,"c",(function(){return m})),n.d(t,"p",(function(){return h})),n.d(t,"k",(function(){return v})),n.d(t,"d",(function(){return x})),n.d(t,"l",(function(){return p})),n.d(t,"g",(function(){return g})),n.d(t,"m",(function(){return y})),n.d(t,"q",(function(){return _})),n.d(t,"e",(function(){return k})),n.d(t,"h",(function(){return I})),n.d(t,"a",(function(){return C})),n.d(t,"n",(function(){return z}));var r=n(63),c=n(94),a=n(18),o=n(122),i=n(29),u=n.n(i),s=n(121),l="/api",d={url:"".concat(l,"/base-data"),setFunc:function(e){return e.res}},j={url:"".concat(l,"/config"),method:"PATCH",setFunc:function(e){var t=e.cur,n=e.req;return Object(a.a)(Object(a.a)({},t),n)}},b={url:"".concat(l,"/courts"),method:"PUT",setFunc:function(e){return e.req}},f={url:"".concat(l,"/login"),method:"POST"},O={url:"".concat(l,"/logout"),method:"POST"},m={url:"".concat(l,"/mail-templates")},h={url:"".concat(l,"/mail-template/:id"),method:"PUT",setFunc:function(e){var t=e.cur,n=e.req;return Object(a.a)(Object(a.a)({},t),{},Object(c.a)({},n.id,n))}},v={url:"".concat(l,"/register"),method:"POST"},x={url:"".concat(l,"/reservations"),method:"POST",setFunc:function(e){return e.res.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{from:u()(e.from).tz(),to:u()(e.to).tz()})}))}},p={url:"".concat(l,"/reservation-group"),method:"POST",setFunc:function(e){var t=e.cur,n=e.res;if(!(null===n||void 0===n?void 0:n.length))return t;var c=Object(r.a)(t);return n[0].type===o.a.DISABLE&&(c=c.filter((function(e){return!n.some((function(t){return Object(s.e)(e,t)}))}))),[].concat(Object(r.a)(c),Object(r.a)(n.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{from:u()(e.from).tz(),to:u()(e.to).tz()})}))))}},g={url:"".concat(l,"/reservation-group/:groupId"),method:"PATCH",setFunc:function(e){var t=e.cur,n=e.req,c=e.params.path.groupId,i=t.find((function(e){return e.groupId===c}));if(!i)return t;var u=Object(r.a)(t);return i.type===o.a.DISABLE&&(u=u.filter((function(e){return!n.reservations.some((function(t){return Object(s.e)(e,t)}))}))),[].concat(Object(r.a)(u.filter((function(e){return e.groupId!==c}))),Object(r.a)(n.reservations.map((function(e){return Object(a.a)(Object(a.a)(Object(a.a)({},i),e),{},{text:n.text||i.text})}))))}},y={url:"".concat(l,"/send-verify-mail"),method:"POST"},_={url:"".concat(l,"/template/:id"),method:"PUT",setFunc:function(e){var t=e.cur,n=e.req;return Object(a.a)(Object(a.a)({},t),{},Object(c.a)({},n.id,n))}},k={url:"".concat(l,"/users"),setFunc:function(e){return e.res.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{lastActivity:e.lastActivity&&u()(e.lastActivity)})}))}},I={url:"".concat(l,"/user/:userId"),method:"PATCH",setFunc:function(e){var t=e.cur,n=e.req;return Array.isArray(t)?t.map((function(e){return e.userId===n.userId?Object(a.a)(Object(a.a)(Object(a.a)({},e),n),{},{verified:(!n.mail||e.mail===n.mail)&&e.verified}):e})):Object(a.a)(Object(a.a)(Object(a.a)({},t),n),{},{verified:(!n.mail||t.mail===n.mail)&&t.verified})}},C={url:"".concat(l,"/user/:userId"),method:"DELETE",setFunc:function(e){var t=e.cur,n=e.params;return t.filter((function(e){return e.userId!==n.path.userId}))}},z={url:"".concat(l,"/verify-mail"),method:"POST",setFunc:function(e){var t=e.cur;return Object(a.a)(Object(a.a)({},t),{},{verified:!0})}}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(130),c=n.n(r),a=n(165),o=n(33),i=n(0),u=n(57),s=function(e){return e.res};function l(e,t){var n=e.url,r=e.method,l=void 0===r?"GET":r,d=e.setFunc,j=void 0===d?s:d,b=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f=Object(i.useContext)(u.b)||{},O=f.user,m=f.logout,h=null===O||void 0===O?void 0:O.token,v=Object(i.useState)(!1),x=Object(o.a)(v,2),p=x[0],g=x[1],y=Object(i.useState)(null),_=Object(o.a)(y,2),k=_[0],I=_[1],C=Object(i.useState)(!!b),z=Object(o.a)(C,2),P=z[0],S=z[1],N=Object(i.useState)(null),B=Object(o.a)(N,2),w=B[0],A=B[1],E=Object(i.useRef)(null),T=Object(i.useCallback)((function(e,r,o){E.current&&E.current.cancel();var i=!1,u=function(){var u=Object(a.a)(c.a.mark((function a(){var u,s,d,b,f,O;return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(g(!1),I(null),S(!0),u=!1,c.prev=4,s=Object.keys((null===e||void 0===e?void 0:e.path)||{}).reduce((function(t,n){return t.replace(":".concat(n),e.path[n])}),n),(d=Object.keys((null===e||void 0===e?void 0:e.query)||{}).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e.query[t]))})).join("&"))&&(s+="?".concat(d)),b={},h&&(b.Authorization="Bearer ".concat(h)),r&&(b["Content-Type"]="application/json"),!i){c.next=13;break}return c.abrupt("return");case 13:return c.next=15,fetch(s,{method:l,headers:b,body:r?JSON.stringify(r):void 0});case 15:return f=c.sent,i||I(f.status),c.next=19,f.json();case 19:O=c.sent,f.ok?(t&&t((function(t){return j({cur:t,params:e,req:r,res:O})})),i||(g(!0),o&&o())):(i||A(O),u=401===f.status),c.next=26;break;case 23:c.prev=23,c.t0=c.catch(4),i||A(c.t0);case 26:return c.prev=26,i||S(!1),u&&(null===m||void 0===m||m()),c.finish(26);case 30:case"end":return c.stop()}}),a,null,[[4,23,26,30]])})));return function(){return u.apply(this,arguments)}}()();return u.cancel=function(){return i=!0},E.current=u,u.cancel}),[m,l,t,j,n,h]);return Object(i.useEffect)((function(){b&&T(null===b||void 0===b?void 0:b.reqParams,null===b||void 0===b?void 0:b.reqData)}),[b,T]),Object(i.useEffect)((function(){return function(){var e,t;return null===(e=E.current)||void 0===e||null===(t=e.cancel)||void 0===t?void 0:t.call(e)}}),[]),Object(i.useMemo)((function(){return[{success:p,loading:P,error:w,status:k},T]}),[p,P,w,k,T])}}},[[276,7,8]]]);
//# sourceMappingURL=main.94d6d60b.chunk.js.map