{"version":3,"sources":["helper.js","ReservationTypes.js","Ball.module.css","navigation/MainMenu.module.css","admin/StatusText.js","ErrorResult.js","updateIntervals.js","useUpdateEffect.js","serviceWorker.js","CookieNotice.js","Footer.js","navigation/MainMenu.js","navigation/NavBar.js","navigation/ProtectedRoute.js","navigation/RouterSwitch.js","App.js","index.js","AuthContext.js","AppContext.js","Ball.js","navigation/NavBar.module.css","App.module.css","api.js","useApi.js"],"names":["findReservation","reservations","date","courtId","r","isBetween","from","to","reservationOverlap","r1","r2","isBefore","isAfter","getCourtName","courts","find","c","name","parseQuery","queryString","query","pairs","substr","split","i","length","pair","decodeURIComponent","visibleHoursToHoursArray","start","end","hours","parseInt","push","RESERVATION_TYPES","Object","freeze","NORMAL","DISABLE","module","exports","StatusText","className","loading","error","success","text","visible","spin","style","color","ErrorResult","margin","status","title","extra","type","onClick","window","location","reload","DEFAULT_UPDATE_INTERVALS_SEC","BASE_DATA","RESERVATIONS","UPDATE_INTERVALS_SEC","setDefaultUpdateIntervals","assign","useUpdateEffect","callback","seconds","useEffect","update","document","hidden","addEventListener","int","setInterval","removeEventListener","clearInterval","Boolean","hostname","match","CookieNotice","localStorage","getItem","close","notification","setItem","info","key","message","duration","placement","description","onClose","btn","size","closeIcon","Footer","noLinks","orgName","useContext","appContext","config","dayjs","format","process","target","rel","href","cn","classNames","bind","styles","MainMenu","horizontal","authContext","autoLoginState","user","pathname","useLocation","history","useHistory","handleClick","useCallback","handleLoginClick","handleRegisterClick","handleLogoutClick","menu","mode","theme","selectedKeys","Item","icon","CalendarOutlined","CarryOutOutlined","BulbOutlined","admin","SubMenu","SettingOutlined","stretch","UserOutlined","menuButton","NavBar","useState","drawerOpen","setDrawerOpen","openMenu","closeDrawer","Header","header","Text","horizontalMenuWrapper","drawerMenuWrapper","MenuOutlined","width","drawer","ProtectedRoute","children","rest","render","state","CalendarPage","lazy","then","m","default","GeneralSettingsPage","InfoPage","LegalPrivacyPage","LoginPage","LogoutPage","VerifyMailPage","MyAccountPage","MyReservationsPage","RegisterPage","StatsPage","EditTemplatesPage","UserManagementPage","RouterSwitch","fallback","Ball","large","centered","exact","path","KioskPage","DemoControls","App","lastAnnouncementRef","useRef","announcement","current","Modal","content","zIndex","basename","preloader","Content","footer","locale","extend","weekOfYear","weekYear","localizedFormat","isSameOrAfter","isSameOrBefore","mockApi","patchFetch","ReactDOM","AppContext","AuthContext","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","console","TOKEN_NAME","React","createContext","AuthContextProvider","_setUser","rememberLoginRef","setUser","getResult","data","newData","token","sessionStorage","useApi","postLoginApi","postLogin","postLogoutApi","postLogout","removeItem","setRememberLogin","rememberLogin","logout","userId","value","useMemo","Provider","AppContextProvider","setConfig","setCourts","templates","setTemplates","setBaseData","getBaseDataApi","getBaseDataState","getBaseData","wrapper","ballWrapper","ball","BASE_PATH","url","setFunc","res","patchConfigApi","method","cur","req","putCourtsApi","getMailTemplatesApi","putMailTemplateApi","id","postRegisterApi","getReservationsApi","map","postReservationGroupApi","out","filter","some","patchReservationGroupApi","groupId","params","reference","postSendVerifyMailApi","putTemplateApi","getUsersApi","lastActivity","patchUserApi","Array","isArray","u","verified","mail","deleteUserApi","postVerifyMailApi","defaultSetFunc","setData","autoFetch","userToken","setSuccess","setStatus","setLoading","setError","lastCallRef","call","reqParams","reqData","successCallback","cancel","cancelled","task","a","is401","parameterizedUrl","keys","reduce","acc","param","replace","encodeURIComponent","join","headers","fetch","body","JSON","stringify","undefined","response","json","resData","ok","doFetch"],"mappings":"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","file":"static/js/main.2d195614.chunk.js","sourcesContent":["export function findReservation(reservations, date, courtId) {\n    if (!reservations)\n        return null;\n\n    for (let r of reservations)\n        if (date.isBetween(r.from, r.to, 'hour', '[)') && courtId === r.courtId)\n            return r;\n    return null;\n}\n\nexport function reservationOverlap(r1, r2) {\n    return r1.from.isBefore(r2.to, 'hour')\n        && r1.to.isAfter(r2.from, 'hour')\n        && r1.courtId === r2.courtId;\n}\n\nexport function getCourtName(courts, courtId) {\n    return courts.find(c => c.courtId === courtId)?.name;\n}\n\nexport function parseQuery(queryString) {\n    const query = {};\n    const pairs = (queryString[0] === '?' ? queryString.substr(1) : queryString).split('&');\n    for (let i = 0; i < pairs.length; i++) {\n        const pair = pairs[i].split('=');\n        query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');\n    }\n    return query;\n}\n\nexport function visibleHoursToHoursArray([start, end]) {\n    const hours = [];\n    for (let i = parseInt(start); i < parseInt(end); ++i)\n        hours.push(i);\n    return hours;\n}","export const RESERVATION_TYPES = Object.freeze({\n    NORMAL: 1,\n    DISABLE: 2,\n});","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Ball_wrapper__2ZIuN\",\"ballWrapper\":\"Ball_ballWrapper__3raqu\",\"large\":\"Ball_large__2_bXH\",\"preloader\":\"Ball_preloader__38zDy\",\"visible\":\"Ball_visible__1j9MH\",\"centered\":\"Ball_centered__2X2XD\",\"ball\":\"Ball_ball__3Ysq4\",\"spin\":\"Ball_spin__3tWSR\",\"jump\":\"Ball_jump__3yJc4\",\"rotate\":\"Ball_rotate__uVyFJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"MainMenu_menu__1Ez4Z\",\"horizontal\":\"MainMenu_horizontal__jNPXA\",\"stretch\":\"MainMenu_stretch__3BpF9\",\"menuButton\":\"MainMenu_menuButton__3Ujw0\"};","import { CheckCircleOutlined, CloseCircleOutlined } from '@ant-design/icons';\n\nimport { Ball } from '../Ball';\nimport { Space } from 'antd';\n\nexport function StatusText({ \n    className,\n    loading,\n    error,\n    success,\n    text\n}) {\n    return (\n        <Space className={className}>\n            {loading && <Ball visible spin />}\n            {error && <CloseCircleOutlined style={{ color: '#ff4d4f' }} />}\n            {success && <CheckCircleOutlined style={{ color: '#52c41a' }} />}\n            <span>{text}</span>\n        </Space>\n    );\n}","import { Button, Result } from 'antd';\n\nexport function ErrorResult() {\n\n    return (\n        <Result\n            style={{ margin: '0 auto' }}\n            status=\"warning\"\n            title=\"Etwas ist schiefgelaufen.\"\n            extra={\n                <Button type=\"primary\" onClick={() => window.location.reload()} >\n                    Erneut versuchen\n                </Button>\n            }\n        />\n    )\n\n}","const DEFAULT_UPDATE_INTERVALS_SEC = { \n    BASE_DATA: 120,\n    RESERVATIONS: 30,\n};\n\nexport const UPDATE_INTERVALS_SEC = DEFAULT_UPDATE_INTERVALS_SEC;\n\nexport function setDefaultUpdateIntervals() {\n    Object.assign(UPDATE_INTERVALS_SEC, DEFAULT_UPDATE_INTERVALS_SEC);\n}","import { useEffect } from 'react';\n\nexport function useUpdateEffect(callback, seconds) {\n    useEffect(() => {\n        const update = () => {\n            if (!document.hidden)\n                callback();\n        };\n\n        document.addEventListener('visibilitychange', update);\n        const int = setInterval(update, seconds * 1000);\n\n        return () => {\n            document.removeEventListener('visibilitychange', update);\n            clearInterval(int);\n        }\n    }, [callback, seconds]);\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { Button, notification } from 'antd';\nimport React, { useEffect } from 'react';\n\nexport function CookieNotice() {\n\n    useEffect(() => {\n        const closed = localStorage.getItem('notice-closed');\n\n        if (closed)\n            return;\n\n        const close = () => {\n            notification.close('cookie-notice');\n            localStorage.setItem('notice-closed', 'true');\n        };\n\n        notification.info({\n            key: 'cookie-notice',\n            message: 'Cookie Hinweis',\n            duration: 0,\n            placement: 'bottomRight',\n            description: (\n                <>\n                    <div>\n                        Funktionsbedingt wird eine zu Cookies alternative Technologie verwendet.\n                    </div>\n                    <div>\n                        Es werden keine 3rd-Party oder Tracking Cookies gesetzt.\n                    </div>\n                </>\n            ),\n            onClose: close,\n            btn: (\n                <Button type=\"primary\" size=\"middle\" onClick={close}>\n                    OK\n                </Button>\n            ),\n            closeIcon: ' ',\n        });\n    }, []);\n\n    return null;\n}","import React, { useContext } from 'react';\n\nimport { Link } from 'react-router-dom';\nimport { appContext } from './AppContext';\nimport dayjs from 'dayjs';\n\nexport function Footer({\n    noLinks,\n}) {\n    const { config: { orgName } } = useContext(appContext);\n\n    const version = process.env.REACT_APP_VERSION;\n\n    return (\n        <>\n            {!noLinks &&\n                <p>\n                    <Link to=\"/legalnotice-privacy\">Impressum / Datenschutz</Link>\n                </p>\n            }\n            <p>\n                {`©${dayjs().format('YYYY')} ${orgName} - v${version} - entwickelt von `}\n                {noLinks \n                    ? <span>Alexander&nbsp;Droste</span>\n                    : <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/alexdroste/reservierungssystem-tennis-v2\">Alexander&nbsp;Droste</a>\n                }\n            </p>\n        </>\n    );\n}","import { BulbOutlined, CalendarOutlined, CarryOutOutlined, SettingOutlined, UserOutlined } from '@ant-design/icons';\nimport { Button, Menu } from 'antd';\nimport React, { useCallback, useContext } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nimport { StatusText } from '../admin/StatusText';\nimport { authContext } from '../AuthContext';\nimport classNames from 'classnames/bind';\nimport styles from './MainMenu.module.css';\n\nconst cn = classNames.bind(styles);\n\nexport function MainMenu({\n    horizontal = false,\n    onClick,\n}) {\n    const { autoLoginState, user } = useContext(authContext);\n    const { pathname } = useLocation();\n    const history = useHistory();\n\n    const handleClick = useCallback(({ key }) => {\n        if (onClick)\n            onClick(key);\n        if (pathname !== key)\n            history.push(key);\n    }, [history, pathname, onClick]);\n\n    const handleLoginClick = useCallback(() => {\n        handleClick({ key: '/login' });\n    }, [handleClick]);\n\n    const handleRegisterClick = useCallback(() => {\n        handleClick({ key: '/register' });\n    }, [handleClick]);\n\n    const handleLogoutClick = useCallback(() => {\n        handleClick({ key: '/logout' });\n    }, [handleClick]);\n\n    /* Keys of Menu.Items match with the corresponding routes\n     * in RouterSwitch to be able to map location.pathname directly\n     * with the Menu.Item for that route => used to highlight the current item\n     * via selectedKeys prop\n     */\n    return (\n        <>\n            <Menu\n                className={cn({\n                    menu: true,\n                    horizontal\n                })}\n                mode={horizontal ? 'horizontal' : 'inline'}\n                theme='light'\n                selectedKeys={[pathname]}\n                onClick={handleClick}\n            >\n                <Menu.Item key=\"/\" icon={<CalendarOutlined />}>\n                    Reservierungskalender\n                </Menu.Item>\n\n                {user &&\n                    <Menu.Item key=\"/my-reservations\" icon={<CarryOutOutlined />}>\n                        Meine Reservierungen\n                    </Menu.Item>\n                }\n\n                <Menu.Item key=\"/info\" icon={<BulbOutlined />}>\n                    Hinweise\n                </Menu.Item>\n\n                {user?.admin &&\n                    <Menu.SubMenu\n                        key=\"/admin\"\n                        title=\"Verwaltung\"\n                        icon={<SettingOutlined />}\n                    >\n                        <Menu.Item key=\"/admin/general\">\n                            Allgemein\n                        </Menu.Item>\n                        <Menu.Item key=\"/admin/stats\">\n                            Statistiken\n                        </Menu.Item>\n                        <Menu.Item key=\"/admin/users\">\n                            Nutzerverwaltung\n                        </Menu.Item>\n                        <Menu.Item key=\"/admin/templates\">\n                            Textvorlagen\n                        </Menu.Item>\n                    </Menu.SubMenu>\n                }\n\n                <span key=\"stretch\" className={styles.stretch} />\n\n                {user &&\n                    <Menu.Item key=\"/profile\" icon={<UserOutlined />}>\n                        Mein Benutzerkonto\n                    </Menu.Item>\n                }\n            </Menu>\n\n            {autoLoginState.loading &&\n                <StatusText \n                    className={cn({\n                        menuButton: true,\n                        horizontal,\n                    })}\n                    loading\n                    text=\"Anmeldung...\"\n                />\n            }\n\n            {user &&\n                <Button\n                    className={cn({\n                        menuButton: true,\n                        horizontal,\n                    })}\n                    onClick={handleLogoutClick}\n                >\n                    Abmelden\n                </Button>\n            }\n\n            {!user && !autoLoginState.loading &&\n                <Button\n                    className={cn({\n                        menuButton: true,\n                        horizontal,\n                    })}\n                    onClick={handleLoginClick}\n                >\n                    Anmelden\n                </Button>\n            }\n\n            {!user && !autoLoginState.loading &&\n                <Button\n                    className={cn({\n                        menuButton: true,\n                        horizontal,\n                    })}\n                    type=\"primary\"\n                    onClick={handleRegisterClick}\n                >\n                    Kostenlos Registrieren\n                </Button>\n            }\n        </>\n    );\n}","import { Button, Drawer, Layout, Typography } from 'antd';\nimport React, { useCallback, useContext, useState } from 'react';\n\nimport { MainMenu } from './MainMenu';\nimport { MenuOutlined } from '@ant-design/icons';\nimport { appContext } from '../AppContext';\nimport styles from './NavBar.module.css';\n\nexport function NavBar() {\n    const { config: { orgName } } = useContext(appContext);\n\n    const [drawerOpen, setDrawerOpen] = useState(false);\n\n    const openMenu = useCallback(() => setDrawerOpen(true), []);\n    const closeDrawer = useCallback(() => setDrawerOpen(false), []);\n\n    return (\n        <Layout.Header className={styles.header}>\n            <div className={styles.title}>\n                <div className={styles.orgName}>\n                    {orgName}\n                </div>\n                <Typography.Text type=\"secondary\">\n                    Reservierungssystem\n                </Typography.Text>\n            </div>\n            <div className={styles.horizontalMenuWrapper}>\n                <MainMenu horizontal />\n            </div>\n            <div className={styles.drawerMenuWrapper}>\n                <Button\n                    type=\"text\"\n                    icon={<MenuOutlined />}\n                    onClick={openMenu}\n                />\n                <Drawer\n                    title={`${orgName}\\nReservierungssystem`}\n                    visible={drawerOpen}\n                    width={300}\n                    className={styles.drawer}\n                    onClose={closeDrawer}\n                >\n                    <MainMenu onClick={closeDrawer} />\n                </Drawer>\n            </div>\n        </Layout.Header>\n    );\n}","import React, { useContext } from 'react';\nimport { Redirect, Route } from 'react-router-dom';\n\nimport { authContext } from '../AuthContext';\n\nexport function ProtectedRoute({ admin, children, ...rest }) {\n\n    const { user } = useContext(authContext);\n\n    return (\n        <Route\n            {...rest}\n            render={({ location }) => {\n                if (!user)\n                    return <Redirect to={{ pathname: \"/login\", state: { from: location } }} />;\n                else if (admin && !user.admin)\n                    return <Redirect to=\"/\" />;\n                return children;\n            }}\n        />\n    );\n}","import React, { Suspense, lazy } from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\n\nimport { Ball } from '../Ball';\nimport { ProtectedRoute } from './ProtectedRoute';\n\nconst CalendarPage = lazy(() => import('../calendar/CalendarPage').then(m => ({ default: m.CalendarPage })));\nconst GeneralSettingsPage = lazy(() => import('../admin/GeneralSettingsPage').then(m => ({ default: m.GeneralSettingsPage })));\nconst InfoPage = lazy(() => import('../other/InfoPage').then(m => ({ default: m.InfoPage })));\nconst LegalPrivacyPage = lazy(() => import('../other/LegalPrivacyPage').then(m => ({ default: m.LegalPrivacyPage })));\nconst LoginPage = lazy(() => import('../user/LoginPage').then(m => ({ default: m.LoginPage })));\nconst LogoutPage = lazy(() => import('../user/LogoutPage').then(m => ({ default: m.LogoutPage })));\nconst VerifyMailPage = lazy(() => import('../user/VerifyMailPage').then(m => ({ default: m.VerifyMailPage })));\nconst MyAccountPage = lazy(() => import('../user/MyAccountPage').then(m => ({ default: m.MyAccountPage })));\nconst MyReservationsPage = lazy(() => import('../calendar/MyReservationsPage').then(m => ({ default: m.MyReservationsPage })));\nconst RegisterPage = lazy(() => import('../user/RegisterPage').then(m => ({ default: m.RegisterPage })));\nconst StatsPage = lazy(() => import('../admin/StatsPage').then(m => ({ default: m.StatsPage })));\nconst EditTemplatesPage = lazy(() => import('../admin/EditTemplatesPage').then(m => ({ default: m.EditTemplatesPage })));\nconst UserManagementPage = lazy(() => import('../admin/UserManagementPage').then(m => ({ default: m.UserManagementPage })));\n\nexport function RouterSwitch() {\n\n    return (\n        <Suspense fallback={<Ball visible large centered spin />}>\n            <Switch>\n\n                <Route exact path=\"/\">\n                    <CalendarPage />\n                </Route>\n\n                <Route exact path=\"/info\">\n                    <InfoPage />\n                </Route>\n\n                <Route exact path=\"/legalnotice-privacy\">\n                    <LegalPrivacyPage />\n                </Route>\n\n                <Route exact path=\"/logout\">\n                    <LogoutPage />\n                </Route>\n\n                <Route exact path=\"/login\">\n                    <LoginPage />\n                </Route>\n\n                <Route exact path=\"/register\">\n                    <RegisterPage />\n                </Route>\n\n                <ProtectedRoute admin exact path=\"/admin/general\">\n                    <GeneralSettingsPage />\n                </ProtectedRoute>\n\n                <ProtectedRoute admin exact path=\"/admin/stats\">\n                    <StatsPage />\n                </ProtectedRoute>\n\n                <ProtectedRoute admin exact path=\"/admin/users\">\n                    <UserManagementPage />\n                </ProtectedRoute>\n\n                <ProtectedRoute admin exact path=\"/admin/templates\">\n                    <EditTemplatesPage />\n                </ProtectedRoute>\n\n                <ProtectedRoute exact path=\"/my-reservations\">\n                    <MyReservationsPage />\n                </ProtectedRoute>\n\n                <ProtectedRoute exact path=\"/profile\">\n                    <MyAccountPage />\n                </ProtectedRoute>\n\n                <ProtectedRoute path=\"/verify-mail/:verifyToken\">\n                    <VerifyMailPage />\n                </ProtectedRoute>\n\n                <Route path=\"*\">\n                    <Redirect to=\"/\" />\n                </Route>\n\n            </Switch>\n        </Suspense>\n    );\n}","import { Layout, Modal } from 'antd';\nimport React, { Suspense, lazy, useContext, useEffect, useRef } from 'react';\nimport { Route, BrowserRouter as Router, Switch } from 'react-router-dom';\n\nimport { Ball } from './Ball';\nimport { CookieNotice } from './CookieNotice';\nimport { ErrorResult } from './ErrorResult';\nimport { Footer } from './Footer';\nimport { NavBar } from './navigation/NavBar';\nimport { RouterSwitch } from './navigation/RouterSwitch';\nimport { appContext } from './AppContext';\nimport styles from './App.module.css';\n\nconst KioskPage = lazy(() => import('./kiosk/KioskPage').then(m => ({ default: m.KioskPage })));\nconst DemoControls = lazy(() => import('./demo/DemoControls').then(m => ({ default: m.DemoControls })));\n\nfunction App() {\n    const { config, state } = useContext(appContext);\n    const lastAnnouncementRef = useRef(null);\n\n    const basename = process.env.PUBLIC_URL;\n    const demoMode = process.env.REACT_APP_DEMO;\n\n    useEffect(() => {\n        if (config?.announcement && config.announcement !== lastAnnouncementRef.current) {\n            lastAnnouncementRef.current = config.announcement;\n            Modal.info({\n                className: styles.announcement,\n                title: \"Ankündigung\",\n                centered: true,\n                content: config.announcement,\n                zIndex: 1200,\n            });\n        }\n    }, [config]);\n\n    if (state.error)\n        return <ErrorResult />;\n\n    if (!config)\n        return <Ball visible preloader spin />;\n\n    return (\n        <Router basename={basename}>\n            <Layout>\n                <Suspense fallback={<Ball visible preloader spin />}>\n\n                    <Switch>\n                        <Route exact path=\"/kiosk\">\n                            <Layout.Content className={styles.content}>\n                                <KioskPage />\n                            </Layout.Content>\n\n                            <Layout.Footer className={styles.footer}>\n                                <Footer noLinks />\n                            </Layout.Footer>\n                        </Route>\n\n                        <Route path=\"*\">\n                            <NavBar />\n\n                            <Layout.Content className={styles.content}>\n                                <RouterSwitch />\n                            </Layout.Content>\n\n                            <Layout.Footer className={styles.footer}>\n                                <Footer />\n                            </Layout.Footer>\n\n                            <CookieNotice />\n                        </Route>\n                    </Switch>\n\n                    {demoMode && <DemoControls />}\n\n                </Suspense>\n            </Layout>\n        </Router>\n    );\n}\n\nexport default App;\n","import 'antd/dist/antd.css';\nimport './index.css';\nimport 'dayjs/locale/de';\nimport 'fontsource-inter/latin-400.css';\nimport 'fontsource-inter/latin-600.css';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport App from './App';\nimport { AppContextProvider } from './AppContext';\nimport { AuthContextProvider } from './AuthContext';\nimport { ConfigProvider } from 'antd';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport dayjs from 'dayjs';\nimport isBetween from 'dayjs/plugin/isBetween';\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter';\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore';\nimport locale from 'antd/lib/locale/de_DE';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\nimport weekOfYear from 'dayjs/plugin/weekOfYear';\nimport weekYear from 'dayjs/plugin/weekYear';\n\ndayjs.locale('de');\ndayjs.extend(weekOfYear);\ndayjs.extend(weekYear);\ndayjs.extend(localizedFormat);\ndayjs.extend(isBetween);\ndayjs.extend(isSameOrAfter);\ndayjs.extend(isSameOrBefore);\n\nfunction renderApp() {\n    ReactDOM.render((\n        <ConfigProvider locale={locale}>\n            <AppContextProvider>\n                <AuthContextProvider>\n                    <App />\n                </AuthContextProvider>\n            </AppContextProvider>\n        </ConfigProvider>\n    ), document.getElementById('root'));\n}\n\nif (process.env.REACT_APP_DEMO) {\n    import('./demo/mockApi').then(mockApi => {\n        mockApi.patchFetch();\n        renderApp();\n    });\n} else {\n    renderApp();\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { postLoginApi, postLogoutApi } from './api';\n\nimport { useApi } from './useApi';\n\nconst TOKEN_NAME = 'usertoken';\n\nexport const authContext = React.createContext();\n\nexport function AuthContextProvider({ children }) {\n\n    const [user, _setUser] = useState(null);\n    const rememberLoginRef = useRef(false);\n\n    const setUser = useCallback(getResult => {\n        _setUser(data => {\n            const newData = getResult(data);\n            if (newData?.token) {\n                if (rememberLoginRef.current)\n                    localStorage.setItem(TOKEN_NAME, newData.token);\n                else\n                    sessionStorage.setItem(TOKEN_NAME, newData.token);\n            }\n            return newData;\n        });\n    }, []);\n\n    const [autoLoginState, postLogin] = useApi(postLoginApi, setUser);\n    const [, postLogout] = useApi(postLogoutApi);\n\n    useEffect(() => {\n        const token = sessionStorage.getItem(TOKEN_NAME) || localStorage.getItem(TOKEN_NAME);\n        if (token && !user)\n            postLogin(null, {\n                type: 'token',\n                token,\n            });\n    }, [postLogin, user]);\n\n    useEffect(() => {\n        if (autoLoginState.error) {\n            sessionStorage.removeItem(TOKEN_NAME);\n            localStorage.removeItem(TOKEN_NAME);\n        }\n    }, [autoLoginState]);\n\n    const setRememberLogin = useCallback(rememberLogin => {\n        rememberLoginRef.current = rememberLogin;\n    }, []);\n\n    const logout = useCallback(() => {\n        postLogout(null, {\n            userId: user?.userId,\n        });\n        _setUser(null);\n        sessionStorage.removeItem(TOKEN_NAME);\n        localStorage.removeItem(TOKEN_NAME);\n    }, [postLogout, user?.userId]);\n\n    const value = useMemo(() => ({\n        autoLoginState,\n        logout,\n        setRememberLogin,\n        setUser,\n        user,\n    }), [\n        autoLoginState,\n        logout,\n        setRememberLogin,\n        setUser,\n        user,\n    ]);\n\n    return (\n        <authContext.Provider value={value}>\n            {children}\n        </authContext.Provider>\n    );\n}","import React, { useCallback, useMemo, useState } from 'react';\n\nimport { UPDATE_INTERVALS_SEC } from './updateIntervals';\nimport { getBaseDataApi } from './api';\nimport { useApi } from './useApi';\nimport { useUpdateEffect } from './useUpdateEffect';\n\nexport const appContext = React.createContext();\n\nexport function AppContextProvider({ children }) {\n\n    const [config, setConfig] = useState();\n    const [courts, setCourts] = useState();\n    const [templates, setTemplates] = useState();\n\n    const setBaseData = useCallback(getResult => {\n        const { config, courts, templates } = getResult(null);\n        setConfig(config);\n        setTemplates(templates);\n        setCourts(courts);\n    }, []);\n\n    const [getBaseDataState, getBaseData] = useApi(getBaseDataApi, setBaseData, true); \n    useUpdateEffect(getBaseData, UPDATE_INTERVALS_SEC.BASE_DATA);\n\n    const value = useMemo(() => ({\n        config,\n        courts,\n        templates,\n        setConfig,\n        setCourts,\n        setTemplates,\n        state: getBaseDataState,\n        reload: getBaseData,\n    }), [\n        config,\n        courts,\n        templates,\n        getBaseDataState,\n        getBaseData,\n    ]);\n\n    return (\n        <appContext.Provider value={value}>\n            {children}\n        </appContext.Provider>\n    );\n}","import React from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './Ball.module.css';\n\nconst cn = classNames.bind(styles);\n\nexport function Ball({\n    centered,\n    large,\n    preloader,\n    spin,\n    visible,\n}) {\n    return (\n        <div className={cn({\n            centered,\n            preloader,\n            spin,\n            visible,\n            wrapper: true,\n        })}>\n            <div className={cn({\n                ballWrapper: true,\n                large,\n            })}>\n                <div className={styles.ball}>\n                </div>\n            </div>\n        </div>\n    )\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"NavBar_header__3EbUr\",\"title\":\"NavBar_title__2Ydj-\",\"orgName\":\"NavBar_orgName__3TDkX\",\"horizontalMenuWrapper\":\"NavBar_horizontalMenuWrapper__pOr71\",\"drawerMenuWrapper\":\"NavBar_drawerMenuWrapper__15WnD\",\"drawer\":\"NavBar_drawer__2Jr7L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"App_content__3La4L\",\"footer\":\"App_footer__29Fsv\",\"announcement\":\"App_announcement__1d1pc\"};","import { RESERVATION_TYPES } from './ReservationTypes';\nimport dayjs from 'dayjs';\nimport { reservationOverlap } from './helper';\n\nconst BASE_PATH = '/api';\n\nexport const getBaseDataApi = {\n    url: `${BASE_PATH}/base-data`,\n    setFunc: ({ res }) => res,\n};\n\nexport const patchConfigApi = {\n    url: `${BASE_PATH}/config`,\n    method: 'PATCH',\n    setFunc: ({ cur, req }) => ({\n        ...cur,\n        ...req,\n    }),\n};\n\nexport const putCourtsApi = {\n    url: `${BASE_PATH}/courts`,\n    method: 'PUT',\n    setFunc: ({ req }) => req,\n};\n\nexport const postLoginApi = {\n    url: `${BASE_PATH}/login`,\n    method: 'POST',\n};\n\nexport const postLogoutApi = {\n    url: `${BASE_PATH}/logout`,\n    method: 'POST',\n};\n\nexport const getMailTemplatesApi = {\n    url: `${BASE_PATH}/mail-templates`,\n};\n\nexport const putMailTemplateApi = {\n    url: `${BASE_PATH}/mail-template/:id`,\n    method: 'PUT',\n    setFunc: ({ cur, req }) => ({\n        ...cur,\n        [req.id]: req,\n    }),\n};\n\nexport const postRegisterApi = {\n    url: `${BASE_PATH}/register`,\n    method: 'POST',\n};\n\nexport const getReservationsApi = {\n    url: `${BASE_PATH}/reservations`,\n    method: 'POST',\n    setFunc: ({ res }) => res.map(r => ({\n        ...r,\n        from: dayjs(r.from),\n        to: dayjs(r.to),\n    })),\n};\n\nexport const postReservationGroupApi = {\n    url: `${BASE_PATH}/reservation-group`,\n    method: 'POST',\n    setFunc: ({ cur, res }) => {\n        if (!res?.length)\n            return cur;\n\n        let out = [...cur];\n        if (res[0].type === RESERVATION_TYPES.DISABLE) {\n            out = out.filter(r1 => (\n                !res.some(r2 => reservationOverlap(r1, r2))\n            ));\n        }\n\n        return [\n            ...out,\n            ...res.map(r => ({\n                ...r,\n                from: dayjs(r.from),\n                to: dayjs(r.to),\n            })),\n        ]\n    },\n};\n\nexport const patchReservationGroupApi = {\n    url: `${BASE_PATH}/reservation-group/:groupId`,\n    method: 'PATCH',\n    setFunc: ({ cur, req, params }) => {\n        const groupId = params.path.groupId;\n        const reference = cur.find(r => r.groupId === groupId);\n        if (!reference)\n            return cur;\n\n        let out = [...cur];\n        if (reference.type === RESERVATION_TYPES.DISABLE) {\n            out = out.filter(r1 => (\n                !req.reservations.some(r2 => reservationOverlap(r1, r2))\n            ));\n        }\n\n        return [\n            ...out.filter(r => r.groupId !== groupId),\n            ...req.reservations.map(r => ({\n                ...reference,\n                ...r,\n                text: req.text || reference.text,\n            }))\n        ];\n    },\n};\n\n// export const deleteReservationGroupApi = {\n//     url: `${BASE_PATH}/reservation-group/:groupId`,\n//     method: 'DELETE',\n//     setFunc: ({ cur, params }) => (\n//         cur.filter(r => r.groupId !== params.path.groupId)\n//     ),\n// };\n\nexport const postSendVerifyMailApi = {\n    url: `${BASE_PATH}/send-verify-mail`,\n    method: 'POST',\n};\n\nexport const putTemplateApi = {\n    url: `${BASE_PATH}/template/:id`,\n    method: 'PUT',\n    setFunc: ({ cur, req }) => ({\n        ...cur,\n        [req.id]: req,\n    }),\n};\n\nexport const getUsersApi = {\n    url: `${BASE_PATH}/users`,\n    setFunc: ({ res }) => res.map(user => ({\n        ...user,\n        lastActivity: user.lastActivity && dayjs(user.lastActivity)\n    })),\n};\n\nexport const patchUserApi = {\n    url: `${BASE_PATH}/user/:userId`,\n    method: 'PATCH',\n    setFunc: ({ cur, req }) => {\n        if (Array.isArray(cur)) {\n            return cur.map(u => {\n                if (u.userId === req.userId)\n                    return {\n                        ...u,\n                        ...req,\n                        verified: (!req.mail || u.mail === req.mail)\n                            ? u.verified : false,\n                    };\n                return u;\n            });\n        } else {\n            return {\n                ...cur,\n                ...req,\n                verified: (!req.mail || cur.mail === req.mail)\n                    ? cur.verified : false,\n            };\n        }\n    },\n};\n\nexport const deleteUserApi = {\n    url: `${BASE_PATH}/user/:userId`,\n    method: 'DELETE',\n    setFunc: ({ cur, params }) => (\n        cur.filter(u => u.userId !== params.path.userId)\n    ),\n};\n\nexport const postVerifyMailApi = {\n    url: `${BASE_PATH}/verify-mail`,\n    method: 'POST',\n    setFunc: ({ cur }) => ({\n        ...cur,\n        verified: true,\n    }),\n};\n","import { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\n\nimport { authContext } from './AuthContext';\n\nconst defaultSetFunc = ({ res }) => res;\n\n// WARNING: function reference to 'call' changes when \n// user.token or user.userId changes\nexport function useApi(\n    {\n        url,\n        method = 'GET',\n        // res must return new state\n        // signature: ({ cur, params, req, res }) => updatedData\n        setFunc = defaultSetFunc,\n    },\n    // setData is called in any case after fetch was successful\n    // even if call was cancelled \n    setData,\n    // autoFetch can be boolean or object like { reqParams, reqData }\n    // will trigger refetch when instance changes\n    autoFetch = false,\n) {\n    const { user, logout } = useContext(authContext) || {};\n    const userToken = user?.token;\n    const [success, setSuccess] = useState(false);\n    const [status, setStatus] = useState(null);\n    const [loading, setLoading] = useState(!!autoFetch);\n    const [error, setError] = useState(null);\n    const lastCallRef = useRef(null);\n\n    // reqParams like { query: { example: 1 }, path: { id: 4 }}\n    const call = useCallback((reqParams, reqData, successCallback) => {\n        if (lastCallRef.current)\n            lastCallRef.current.cancel();\n\n        let cancelled = false;\n\n        const doFetch = async () => {\n            setSuccess(false);\n            setStatus(null);\n            setLoading(true);\n            let is401 = false;\n            try {\n                let parameterizedUrl = Object.keys(reqParams?.path || {})\n                    .reduce((acc, param) => acc.replace(`:${param}`, reqParams.path[param]), url);\n                const queryString = Object.keys(reqParams?.query || {})\n                    .map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(reqParams.query[key])}`)\n                    .join('&');\n                if (queryString)\n                    parameterizedUrl += `?${queryString}`;\n                \n                const headers = {};\n                if (userToken)\n                    headers['Authorization'] = `Bearer ${userToken}`;\n                if (reqData)\n                    headers['Content-Type'] = 'application/json';\n                \n                if (cancelled) \n                    return;\n\n                const response = await fetch(parameterizedUrl, {\n                    method,\n                    headers,\n                    body: reqData ? JSON.stringify(reqData) : undefined,\n                });\n\n                if (!cancelled)\n                    setStatus(response.status);\n\n                const resData = await response.json();\n\n                if (response.ok) {\n                    if (setData)\n                        setData(cur => setFunc({\n                            cur, \n                            params: reqParams,\n                            req: reqData, \n                            res: resData,\n                        }));\n                    if (!cancelled) {\n                        setSuccess(true);\n                        if (successCallback)\n                            successCallback();\n                    }\n                } else {\n                    if (!cancelled)\n                        setError(resData);\n                    is401 = response.status === 401;\n                }\n            } catch (err) {\n                if (!cancelled)\n                    setError(err);\n            } finally {\n                if (!cancelled)\n                    setLoading(false);\n                if (is401)\n                    logout?.();\n            }\n        };\n\n        const task = doFetch();\n        task.cancel = () => cancelled = true;\n        lastCallRef.current = task;\n        return task.cancel;\n    }, [\n        logout, // changes when user.userId changes\n        method,\n        setData,\n        setFunc,\n        url,\n        userToken,\n    ]);\n\n    useEffect(() => {\n        if (autoFetch)\n            call(autoFetch?.reqParams, autoFetch?.reqData);\n    }, [autoFetch, call])\n\n    useEffect(() => {\n        return () => lastCallRef.current?.cancel?.();\n    }, []);\n\n    return useMemo(() => ([\n        {\n            success,\n            loading,\n            error,\n            status,\n        },\n        call, // see hint at top of file\n    ]), [\n        success,\n        loading,\n        error,\n        status,\n        call,\n    ]);\n}"],"sourceRoot":""}