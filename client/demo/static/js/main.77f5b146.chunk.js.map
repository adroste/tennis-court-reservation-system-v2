{"version":3,"sources":["helper.js","ReservationTypes.js","Ball.module.css","navigation/MainMenu.module.css","admin/StatusText.js","ErrorResult.js","updateIntervals.js","useUpdateEffect.js","serviceWorker.js","CookieNotice.js","Footer.js","navigation/MainMenu.js","navigation/NavBar.js","navigation/ProtectedRoute.js","navigation/RouterSwitch.js","App.js","index.js","AuthContext.js","AppContext.js","Ball.js","navigation/NavBar.module.css","App.module.css","api.js","useApi.js"],"names":["findReservation","reservations","from","to","courtId","find","r","reservationOverlap","r1","r2","isBefore","isAfter","getCourtName","courts","c","name","parseQuery","queryString","query","pairs","substr","split","i","length","pair","decodeURIComponent","visibleHoursToLocalizedHourRange","date","visibleHours","start","parseInt","end","startDate","hour","endDate","hours","add","push","span","visibleHoursToHoursArray","isTimeZoneValid","tz","Intl","DateTimeFormat","undefined","timeZone","ex","RESERVATION_TYPES","Object","freeze","NORMAL","DISABLE","module","exports","StatusText","className","loading","error","success","text","visible","spin","style","color","ErrorResult","margin","status","title","extra","type","onClick","window","location","reload","DEFAULT_UPDATE_INTERVALS_SEC","BASE_DATA","RESERVATIONS","UPDATE_INTERVALS_SEC","setDefaultUpdateIntervals","assign","useUpdateEffect","callback","seconds","useEffect","update","document","hidden","addEventListener","int","setInterval","removeEventListener","clearInterval","Boolean","hostname","match","CookieNotice","localStorage","getItem","close","notification","setItem","info","key","message","duration","placement","description","onClose","btn","size","closeIcon","Footer","noLinks","orgName","useContext","appContext","config","dayjs","format","process","target","rel","href","cn","classNames","bind","styles","MainMenu","horizontal","authContext","autoLoginState","user","pathname","useLocation","history","useHistory","handleClick","useCallback","handleLoginClick","handleRegisterClick","handleLogoutClick","menu","mode","theme","selectedKeys","Item","icon","CalendarOutlined","CarryOutOutlined","BulbOutlined","admin","SubMenu","SettingOutlined","stretch","UserOutlined","menuButton","NavBar","useState","drawerOpen","setDrawerOpen","openMenu","closeDrawer","Header","header","Text","horizontalMenuWrapper","drawerMenuWrapper","MenuOutlined","width","drawer","ProtectedRoute","children","rest","render","state","CalendarPage","lazy","then","m","default","GeneralSettingsPage","InfoPage","LegalPrivacyPage","LoginPage","LogoutPage","VerifyMailPage","MyAccountPage","MyReservationsPage","RegisterPage","StatsPage","EditTemplatesPage","UserManagementPage","RouterSwitch","fallback","Ball","large","centered","exact","path","KioskPage","DemoControls","App","lastAnnouncementRef","useRef","announcement","current","Modal","content","zIndex","basename","preloader","Content","footer","extend","weekOfYear","weekYear","localizedFormat","isBetween","isSameOrAfter","isSameOrBefore","utc","timezone","locale","mockApi","patchFetch","ReactDOM","AppContext","AuthContext","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","console","TOKEN_NAME","React","createContext","AuthContextProvider","_setUser","rememberLoginRef","setUser","getResult","data","newData","token","sessionStorage","useApi","postLoginApi","postLogin","postLogoutApi","postLogout","removeItem","setRememberLogin","rememberLogin","logout","userId","value","useMemo","Provider","AppContextProvider","setConfig","setCourts","templates","setTemplates","setBaseData","cur","deepEqual","getBaseDataApi","getBaseDataState","getBaseData","setDefault","wrapper","ballWrapper","ball","BASE_PATH","url","setFunc","res","patchConfigApi","method","req","putCourtsApi","getMailTemplatesApi","putMailTemplateApi","id","postRegisterApi","getReservationsApi","map","postReservationGroupApi","out","filter","some","patchReservationGroupApi","groupId","params","reference","postSendVerifyMailApi","putTemplateApi","getUsersApi","lastActivity","patchUserApi","Array","isArray","u","verified","mail","deleteUserApi","postVerifyMailApi","defaultSetFunc","setData","autoFetch","userToken","setSuccess","setStatus","setLoading","setError","lastCallRef","call","reqParams","reqData","successCallback","cancel","cancelled","task","a","is401","parameterizedUrl","keys","reduce","acc","param","replace","encodeURIComponent","join","headers","fetch","body","JSON","stringify","response","json","resData","ok","doFetch"],"mappings":"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","file":"static/js/main.77f5b146.chunk.js","sourcesContent":["export function findReservation(reservations, from, to, courtId) {\n    if (!reservations)\n        return null;\n    return reservations.find(r => reservationOverlap(r, { from, to, courtId }));\n}\n\nexport function reservationOverlap(r1, r2) {\n    return r1.from.isBefore(r2.to, 'hour')\n        && r1.to.isAfter(r2.from, 'hour')\n        && r1.courtId === r2.courtId;\n}\n\nexport function getCourtName(courts, courtId) {\n    return courts.find(c => c.courtId === courtId)?.name;\n}\n\nexport function parseQuery(queryString) {\n    const query = {};\n    const pairs = (queryString[0] === '?' ? queryString.substr(1) : queryString).split('&');\n    for (let i = 0; i < pairs.length; i++) {\n        const pair = pairs[i].split('=');\n        query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');\n    }\n    return query;\n}\n\nexport function visibleHoursToLocalizedHourRange(date, visibleHours) {\n    const start = parseInt(visibleHours[0]);\n    const end = parseInt(visibleHours[1]);\n    const startDate = date.hour(start);\n    const endDate = date.hour(end);\n    const hours = [];\n    for (let from = startDate; from.isBefore(endDate, 'hour');) {\n        const to = from.add(1, 'hour');\n        hours.push({ \n            from, \n            to,\n            span: (to.hour() || 24) - from.hour(),\n        });\n        from = to;\n    }\n    return hours;\n}\n\nexport function visibleHoursToHoursArray([start, end]) {\n    const hours = [];\n    for (let i = parseInt(start); i < parseInt(end); ++i)\n        hours.push(i);\n    return hours;\n}\n\nexport function isTimeZoneValid(tz) {\n    try {\n        Intl.DateTimeFormat(undefined, {timeZone: tz});\n        return true;\n    } catch (ex) {\n        return false;\n    }\n}","export const RESERVATION_TYPES = Object.freeze({\n    NORMAL: 1,\n    DISABLE: 2,\n});","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Ball_wrapper__2ZIuN\",\"ballWrapper\":\"Ball_ballWrapper__3raqu\",\"large\":\"Ball_large__2_bXH\",\"preloader\":\"Ball_preloader__38zDy\",\"visible\":\"Ball_visible__1j9MH\",\"centered\":\"Ball_centered__2X2XD\",\"ball\":\"Ball_ball__3Ysq4\",\"spin\":\"Ball_spin__3tWSR\",\"jump\":\"Ball_jump__3yJc4\",\"rotate\":\"Ball_rotate__uVyFJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"MainMenu_menu__1Ez4Z\",\"horizontal\":\"MainMenu_horizontal__jNPXA\",\"stretch\":\"MainMenu_stretch__3BpF9\",\"menuButton\":\"MainMenu_menuButton__3Ujw0\"};","import { CheckCircleOutlined, CloseCircleOutlined } from '@ant-design/icons';\n\nimport { Ball } from '../Ball';\nimport { Space } from 'antd';\n\nexport function StatusText({ \n    className,\n    loading,\n    error,\n    success,\n    text\n}) {\n    return (\n        <Space className={className}>\n            {loading && <Ball visible spin />}\n            {error && <CloseCircleOutlined style={{ color: '#ff4d4f' }} />}\n            {success && <CheckCircleOutlined style={{ color: '#52c41a' }} />}\n            <span>{text}</span>\n        </Space>\n    );\n}","import { Button, Result } from 'antd';\n\nexport function ErrorResult() {\n\n    return (\n        <Result\n            style={{ margin: '0 auto' }}\n            status=\"warning\"\n            title=\"Etwas ist schiefgelaufen.\"\n            extra={\n                <Button type=\"primary\" onClick={() => window.location.reload()} >\n                    Erneut versuchen\n                </Button>\n            }\n        />\n    )\n\n}","const DEFAULT_UPDATE_INTERVALS_SEC = { \n    BASE_DATA: 120,\n    RESERVATIONS: 30,\n};\n\nexport const UPDATE_INTERVALS_SEC = DEFAULT_UPDATE_INTERVALS_SEC;\n\nexport function setDefaultUpdateIntervals() {\n    Object.assign(UPDATE_INTERVALS_SEC, DEFAULT_UPDATE_INTERVALS_SEC);\n}","import { useEffect } from 'react';\n\nexport function useUpdateEffect(callback, seconds) {\n    useEffect(() => {\n        const update = () => {\n            if (!document.hidden)\n                callback();\n        };\n\n        document.addEventListener('visibilitychange', update);\n        const int = setInterval(update, seconds * 1000);\n\n        return () => {\n            document.removeEventListener('visibilitychange', update);\n            clearInterval(int);\n        }\n    }, [callback, seconds]);\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { Button, notification } from 'antd';\nimport React, { useEffect } from 'react';\n\nexport function CookieNotice() {\n\n    useEffect(() => {\n        const closed = localStorage.getItem('notice-closed');\n\n        if (closed)\n            return;\n\n        const close = () => {\n            notification.close('cookie-notice');\n            localStorage.setItem('notice-closed', 'true');\n        };\n\n        notification.info({\n            key: 'cookie-notice',\n            message: 'Cookie Hinweis',\n            duration: 0,\n            placement: 'bottomRight',\n            description: (\n                <>\n                    <div>\n                        Funktionsbedingt wird eine zu Cookies alternative Technologie verwendet.\n                    </div>\n                    <div>\n                        Es werden keine 3rd-Party oder Tracking Cookies gesetzt.\n                    </div>\n                </>\n            ),\n            onClose: close,\n            btn: (\n                <Button type=\"primary\" size=\"middle\" onClick={close}>\n                    OK\n                </Button>\n            ),\n            closeIcon: ' ',\n        });\n    }, []);\n\n    return null;\n}","import React, { useContext } from 'react';\n\nimport { Link } from 'react-router-dom';\nimport { appContext } from './AppContext';\nimport dayjs from 'dayjs';\n\nexport function Footer({\n    noLinks,\n}) {\n    const { config: { orgName } } = useContext(appContext);\n\n    const version = process.env.REACT_APP_VERSION;\n\n    return (\n        <>\n            {!noLinks &&\n                <p>\n                    <Link to=\"/legalnotice-privacy\">Impressum / Datenschutz</Link>\n                </p>\n            }\n            <p>\n                {`©${dayjs().format('YYYY')} ${orgName} - v${version} - entwickelt von `}\n                {noLinks \n                    ? <span>Alexander&nbsp;Droste</span>\n                    : <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/alexdroste/reservierungssystem-tennis-v2\">Alexander&nbsp;Droste</a>\n                }\n            </p>\n        </>\n    );\n}","import { BulbOutlined, CalendarOutlined, CarryOutOutlined, SettingOutlined, UserOutlined } from '@ant-design/icons';\nimport { Button, Menu } from 'antd';\nimport React, { useCallback, useContext } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\n\nimport { StatusText } from '../admin/StatusText';\nimport { authContext } from '../AuthContext';\nimport classNames from 'classnames/bind';\nimport styles from './MainMenu.module.css';\n\nconst cn = classNames.bind(styles);\n\nexport function MainMenu({\n    horizontal = false,\n    onClick,\n}) {\n    const { autoLoginState, user } = useContext(authContext);\n    const { pathname } = useLocation();\n    const history = useHistory();\n\n    const handleClick = useCallback(({ key }) => {\n        if (onClick)\n            onClick(key);\n        if (pathname !== key)\n            history.push(key);\n    }, [history, pathname, onClick]);\n\n    const handleLoginClick = useCallback(() => {\n        handleClick({ key: '/login' });\n    }, [handleClick]);\n\n    const handleRegisterClick = useCallback(() => {\n        handleClick({ key: '/register' });\n    }, [handleClick]);\n\n    const handleLogoutClick = useCallback(() => {\n        handleClick({ key: '/logout' });\n    }, [handleClick]);\n\n    /* Keys of Menu.Items match with the corresponding routes\n     * in RouterSwitch to be able to map location.pathname directly\n     * with the Menu.Item for that route => used to highlight the current item\n     * via selectedKeys prop\n     */\n    return (\n        <>\n            <Menu\n                className={cn({\n                    menu: true,\n                    horizontal\n                })}\n                mode={horizontal ? 'horizontal' : 'inline'}\n                theme='light'\n                selectedKeys={[pathname]}\n                onClick={handleClick}\n            >\n                <Menu.Item key=\"/\" icon={<CalendarOutlined />}>\n                    Reservierungskalender\n                </Menu.Item>\n\n                {user &&\n                    <Menu.Item key=\"/my-reservations\" icon={<CarryOutOutlined />}>\n                        Meine Reservierungen\n                    </Menu.Item>\n                }\n\n                <Menu.Item key=\"/info\" icon={<BulbOutlined />}>\n                    Hinweise\n                </Menu.Item>\n\n                {user?.admin &&\n                    <Menu.SubMenu\n                        key=\"/admin\"\n                        title=\"Verwaltung\"\n                        icon={<SettingOutlined />}\n                    >\n                        <Menu.Item key=\"/admin/general\">\n                            Allgemein\n                        </Menu.Item>\n                        <Menu.Item key=\"/admin/stats\">\n                            Statistiken\n                        </Menu.Item>\n                        <Menu.Item key=\"/admin/users\">\n                            Nutzerverwaltung\n                        </Menu.Item>\n                        <Menu.Item key=\"/admin/templates\">\n                            Textvorlagen\n                        </Menu.Item>\n                    </Menu.SubMenu>\n                }\n\n                <span key=\"stretch\" className={styles.stretch} />\n\n                {user &&\n                    <Menu.Item key=\"/profile\" icon={<UserOutlined />}>\n                        Mein Benutzerkonto\n                    </Menu.Item>\n                }\n            </Menu>\n\n            {autoLoginState.loading &&\n                <StatusText \n                    className={cn({\n                        menuButton: true,\n                        horizontal,\n                    })}\n                    loading\n                    text=\"Anmeldung...\"\n                />\n            }\n\n            {user &&\n                <Button\n                    className={cn({\n                        menuButton: true,\n                        horizontal,\n                    })}\n                    onClick={handleLogoutClick}\n                >\n                    Abmelden\n                </Button>\n            }\n\n            {!user && !autoLoginState.loading &&\n                <Button\n                    className={cn({\n                        menuButton: true,\n                        horizontal,\n                    })}\n                    onClick={handleLoginClick}\n                >\n                    Anmelden\n                </Button>\n            }\n\n            {!user && !autoLoginState.loading &&\n                <Button\n                    className={cn({\n                        menuButton: true,\n                        horizontal,\n                    })}\n                    type=\"primary\"\n                    onClick={handleRegisterClick}\n                >\n                    Kostenlos Registrieren\n                </Button>\n            }\n        </>\n    );\n}","import { Button, Drawer, Layout, Typography } from 'antd';\nimport React, { useCallback, useContext, useState } from 'react';\n\nimport { MainMenu } from './MainMenu';\nimport { MenuOutlined } from '@ant-design/icons';\nimport { appContext } from '../AppContext';\nimport styles from './NavBar.module.css';\n\nexport function NavBar() {\n    const { config: { orgName } } = useContext(appContext);\n\n    const [drawerOpen, setDrawerOpen] = useState(false);\n\n    const openMenu = useCallback(() => setDrawerOpen(true), []);\n    const closeDrawer = useCallback(() => setDrawerOpen(false), []);\n\n    return (\n        <Layout.Header className={styles.header}>\n            <div className={styles.title}>\n                <div className={styles.orgName}>\n                    {orgName}\n                </div>\n                <Typography.Text type=\"secondary\">\n                    Reservierungssystem\n                </Typography.Text>\n            </div>\n            <div className={styles.horizontalMenuWrapper}>\n                <MainMenu horizontal />\n            </div>\n            <div className={styles.drawerMenuWrapper}>\n                <Button\n                    type=\"text\"\n                    icon={<MenuOutlined />}\n                    onClick={openMenu}\n                />\n                <Drawer\n                    title={`${orgName}\\nReservierungssystem`}\n                    visible={drawerOpen}\n                    width={300}\n                    className={styles.drawer}\n                    onClose={closeDrawer}\n                >\n                    <MainMenu onClick={closeDrawer} />\n                </Drawer>\n            </div>\n        </Layout.Header>\n    );\n}","import React, { useContext } from 'react';\nimport { Redirect, Route } from 'react-router-dom';\n\nimport { authContext } from '../AuthContext';\n\nexport function ProtectedRoute({ admin, children, ...rest }) {\n\n    const { user } = useContext(authContext);\n\n    return (\n        <Route\n            {...rest}\n            render={({ location }) => {\n                if (!user)\n                    return <Redirect to={{ pathname: \"/login\", state: { from: location } }} />;\n                else if (admin && !user.admin)\n                    return <Redirect to=\"/\" />;\n                return children;\n            }}\n        />\n    );\n}","import React, { Suspense, lazy } from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\n\nimport { Ball } from '../Ball';\nimport { ProtectedRoute } from './ProtectedRoute';\n\nconst CalendarPage = lazy(() => import('../calendar/CalendarPage').then(m => ({ default: m.CalendarPage })));\nconst GeneralSettingsPage = lazy(() => import('../admin/GeneralSettingsPage').then(m => ({ default: m.GeneralSettingsPage })));\nconst InfoPage = lazy(() => import('../other/InfoPage').then(m => ({ default: m.InfoPage })));\nconst LegalPrivacyPage = lazy(() => import('../other/LegalPrivacyPage').then(m => ({ default: m.LegalPrivacyPage })));\nconst LoginPage = lazy(() => import('../user/LoginPage').then(m => ({ default: m.LoginPage })));\nconst LogoutPage = lazy(() => import('../user/LogoutPage').then(m => ({ default: m.LogoutPage })));\nconst VerifyMailPage = lazy(() => import('../user/VerifyMailPage').then(m => ({ default: m.VerifyMailPage })));\nconst MyAccountPage = lazy(() => import('../user/MyAccountPage').then(m => ({ default: m.MyAccountPage })));\nconst MyReservationsPage = lazy(() => import('../calendar/MyReservationsPage').then(m => ({ default: m.MyReservationsPage })));\nconst RegisterPage = lazy(() => import('../user/RegisterPage').then(m => ({ default: m.RegisterPage })));\nconst StatsPage = lazy(() => import('../admin/StatsPage').then(m => ({ default: m.StatsPage })));\nconst EditTemplatesPage = lazy(() => import('../admin/EditTemplatesPage').then(m => ({ default: m.EditTemplatesPage })));\nconst UserManagementPage = lazy(() => import('../admin/UserManagementPage').then(m => ({ default: m.UserManagementPage })));\n\nexport function RouterSwitch() {\n\n    return (\n        <Suspense fallback={<Ball visible large centered spin />}>\n            <Switch>\n\n                <Route exact path=\"/\">\n                    <CalendarPage />\n                </Route>\n\n                <Route exact path=\"/info\">\n                    <InfoPage />\n                </Route>\n\n                <Route exact path=\"/legalnotice-privacy\">\n                    <LegalPrivacyPage />\n                </Route>\n\n                <Route exact path=\"/logout\">\n                    <LogoutPage />\n                </Route>\n\n                <Route exact path=\"/login\">\n                    <LoginPage />\n                </Route>\n\n                <Route exact path=\"/register\">\n                    <RegisterPage />\n                </Route>\n\n                <ProtectedRoute admin exact path=\"/admin/general\">\n                    <GeneralSettingsPage />\n                </ProtectedRoute>\n\n                <ProtectedRoute admin exact path=\"/admin/stats\">\n                    <StatsPage />\n                </ProtectedRoute>\n\n                <ProtectedRoute admin exact path=\"/admin/users\">\n                    <UserManagementPage />\n                </ProtectedRoute>\n\n                <ProtectedRoute admin exact path=\"/admin/templates\">\n                    <EditTemplatesPage />\n                </ProtectedRoute>\n\n                <ProtectedRoute exact path=\"/my-reservations\">\n                    <MyReservationsPage />\n                </ProtectedRoute>\n\n                <ProtectedRoute exact path=\"/profile\">\n                    <MyAccountPage />\n                </ProtectedRoute>\n\n                <ProtectedRoute path=\"/verify-mail/:verifyToken\">\n                    <VerifyMailPage />\n                </ProtectedRoute>\n\n                <Route path=\"*\">\n                    <Redirect to=\"/\" />\n                </Route>\n\n            </Switch>\n        </Suspense>\n    );\n}","import { Layout, Modal } from 'antd';\nimport React, { Suspense, lazy, useContext, useEffect, useRef } from 'react';\nimport { Route, BrowserRouter as Router, Switch } from 'react-router-dom';\n\nimport { Ball } from './Ball';\nimport { CookieNotice } from './CookieNotice';\nimport { ErrorResult } from './ErrorResult';\nimport { Footer } from './Footer';\nimport { NavBar } from './navigation/NavBar';\nimport { RouterSwitch } from './navigation/RouterSwitch';\nimport { appContext } from './AppContext';\nimport styles from './App.module.css';\n\nconst KioskPage = lazy(() => import('./kiosk/KioskPage').then(m => ({ default: m.KioskPage })));\nconst DemoControls = lazy(() => import('./demo/DemoControls').then(m => ({ default: m.DemoControls })));\n\nfunction App() {\n    const { config, state } = useContext(appContext);\n    const lastAnnouncementRef = useRef(null);\n\n    const basename = process.env.PUBLIC_URL;\n    const demoMode = process.env.REACT_APP_DEMO;\n\n    useEffect(() => {\n        if (config?.announcement && config.announcement !== lastAnnouncementRef.current) {\n            lastAnnouncementRef.current = config.announcement;\n            Modal.info({\n                className: styles.announcement,\n                title: \"Ankündigung\",\n                centered: true,\n                content: config.announcement,\n                zIndex: 1200,\n            });\n        }\n    }, [config]);\n\n    if (state.error)\n        return <ErrorResult />;\n\n    if (!config)\n        return <Ball visible preloader spin />;\n\n    return (\n        <Router basename={basename}>\n            <Layout>\n                <Suspense fallback={<Ball visible preloader spin />}>\n\n                    <Switch>\n                        <Route exact path=\"/kiosk\">\n                            <Layout.Content className={styles.content}>\n                                <KioskPage />\n                            </Layout.Content>\n\n                            <Layout.Footer className={styles.footer}>\n                                <Footer noLinks />\n                            </Layout.Footer>\n                        </Route>\n\n                        <Route path=\"*\">\n                            <NavBar />\n\n                            <Layout.Content className={styles.content}>\n                                <RouterSwitch />\n                            </Layout.Content>\n\n                            <Layout.Footer className={styles.footer}>\n                                <Footer />\n                            </Layout.Footer>\n\n                            <CookieNotice />\n                        </Route>\n                    </Switch>\n\n                    {demoMode && <DemoControls />}\n\n                </Suspense>\n            </Layout>\n        </Router>\n    );\n}\n\nexport default App;\n","import 'antd/dist/antd.css';\nimport './index.css';\nimport 'dayjs/locale/de';\nimport 'fontsource-inter/latin-400.css';\nimport 'fontsource-inter/latin-600.css';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport App from './App';\nimport { AppContextProvider } from './AppContext';\nimport { AuthContextProvider } from './AuthContext';\nimport { ConfigProvider } from 'antd';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport dayjs from 'dayjs';\nimport isBetween from 'dayjs/plugin/isBetween';\nimport isSameOrAfter from 'dayjs/plugin/isSameOrAfter';\nimport isSameOrBefore from 'dayjs/plugin/isSameOrBefore';\nimport locale from 'antd/lib/locale/de_DE';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\nimport timezone from 'dayjs/plugin/timezone';\nimport utc from 'dayjs/plugin/utc';\nimport weekOfYear from 'dayjs/plugin/weekOfYear';\nimport weekYear from 'dayjs/plugin/weekYear';\n\ndayjs.extend(weekOfYear);\ndayjs.extend(weekYear);\ndayjs.extend(localizedFormat);\ndayjs.extend(isBetween);\ndayjs.extend(isSameOrAfter);\ndayjs.extend(isSameOrBefore);\ndayjs.extend(utc);\ndayjs.extend(timezone);\ndayjs.locale('de');\n\nfunction renderApp() {\n    ReactDOM.render((\n        <ConfigProvider locale={locale}>\n            <AppContextProvider>\n                <AuthContextProvider>\n                    <App />\n                </AuthContextProvider>\n            </AppContextProvider>\n        </ConfigProvider>\n    ), document.getElementById('root'));\n}\n\nif (process.env.REACT_APP_DEMO) {\n    import('./demo/mockApi').then(mockApi => {\n        mockApi.patchFetch();\n        renderApp();\n    });\n} else {\n    renderApp();\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { postLoginApi, postLogoutApi } from './api';\n\nimport { useApi } from './useApi';\n\nconst TOKEN_NAME = 'usertoken';\n\nexport const authContext = React.createContext();\n\nexport function AuthContextProvider({ children }) {\n\n    const [user, _setUser] = useState(null);\n    const rememberLoginRef = useRef(false);\n\n    const setUser = useCallback(getResult => {\n        _setUser(data => {\n            const newData = getResult(data);\n            if (newData?.token) {\n                if (rememberLoginRef.current)\n                    localStorage.setItem(TOKEN_NAME, newData.token);\n                else\n                    sessionStorage.setItem(TOKEN_NAME, newData.token);\n            }\n            return newData;\n        });\n    }, []);\n\n    const [autoLoginState, postLogin] = useApi(postLoginApi, setUser);\n    const [, postLogout] = useApi(postLogoutApi);\n\n    useEffect(() => {\n        const token = sessionStorage.getItem(TOKEN_NAME) || localStorage.getItem(TOKEN_NAME);\n        if (token && !user)\n            postLogin(null, {\n                type: 'token',\n                token,\n            });\n    }, [postLogin, user]);\n\n    useEffect(() => {\n        if (autoLoginState.error) {\n            sessionStorage.removeItem(TOKEN_NAME);\n            localStorage.removeItem(TOKEN_NAME);\n        }\n    }, [autoLoginState]);\n\n    const setRememberLogin = useCallback(rememberLogin => {\n        rememberLoginRef.current = rememberLogin;\n    }, []);\n\n    const logout = useCallback(() => {\n        postLogout(null, {\n            userId: user?.userId,\n        });\n        _setUser(null);\n        sessionStorage.removeItem(TOKEN_NAME);\n        localStorage.removeItem(TOKEN_NAME);\n    }, [postLogout, user?.userId]);\n\n    const value = useMemo(() => ({\n        autoLoginState,\n        logout,\n        setRememberLogin,\n        setUser,\n        user,\n    }), [\n        autoLoginState,\n        logout,\n        setRememberLogin,\n        setUser,\n        user,\n    ]);\n\n    return (\n        <authContext.Provider value={value}>\n            {children}\n        </authContext.Provider>\n    );\n}","import React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { UPDATE_INTERVALS_SEC } from './updateIntervals';\nimport dayjs from 'dayjs';\nimport deepEqual from 'deep-equal';\nimport { getBaseDataApi } from './api';\nimport { useApi } from './useApi';\nimport { useUpdateEffect } from './useUpdateEffect';\n\nexport const appContext = React.createContext();\n\nexport function AppContextProvider({ children }) {\n\n    const [config, setConfig] = useState();\n    const [courts, setCourts] = useState();\n    const [templates, setTemplates] = useState();\n\n    const setBaseData = useCallback(getResult => {\n        const { config, courts, templates } = getResult(null);\n        setConfig(cur => deepEqual(cur, config) ? cur : config);\n        setTemplates(cur => deepEqual(cur, templates) ? cur : templates);\n        setCourts(cur => deepEqual(cur, courts) ? cur : courts);\n    }, []);\n\n    const [getBaseDataState, getBaseData] = useApi(getBaseDataApi, setBaseData, true); \n    useUpdateEffect(getBaseData, UPDATE_INTERVALS_SEC.BASE_DATA);\n\n    useEffect(() => {\n        dayjs.tz.setDefault(config?.timeZone);\n    }, [config?.timeZone])\n\n    const value = useMemo(() => ({\n        config,\n        courts,\n        templates,\n        setConfig,\n        setCourts,\n        setTemplates,\n        state: getBaseDataState,\n        reload: getBaseData,\n    }), [\n        config,\n        courts,\n        templates,\n        getBaseDataState,\n        getBaseData,\n    ]);\n\n    return (\n        <appContext.Provider value={value}>\n            {children}\n        </appContext.Provider>\n    );\n}","import React from 'react';\nimport classNames from 'classnames/bind';\nimport styles from './Ball.module.css';\n\nconst cn = classNames.bind(styles);\n\nexport function Ball({\n    centered,\n    large,\n    preloader,\n    spin,\n    visible,\n}) {\n    return (\n        <div className={cn({\n            centered,\n            preloader,\n            spin,\n            visible,\n            wrapper: true,\n        })}>\n            <div className={cn({\n                ballWrapper: true,\n                large,\n            })}>\n                <div className={styles.ball}>\n                </div>\n            </div>\n        </div>\n    )\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"NavBar_header__3EbUr\",\"title\":\"NavBar_title__2Ydj-\",\"orgName\":\"NavBar_orgName__3TDkX\",\"horizontalMenuWrapper\":\"NavBar_horizontalMenuWrapper__pOr71\",\"drawerMenuWrapper\":\"NavBar_drawerMenuWrapper__15WnD\",\"drawer\":\"NavBar_drawer__2Jr7L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"App_content__3La4L\",\"footer\":\"App_footer__29Fsv\",\"announcement\":\"App_announcement__1d1pc\"};","import { RESERVATION_TYPES } from './ReservationTypes';\nimport dayjs from 'dayjs';\nimport { reservationOverlap } from './helper';\n\nconst BASE_PATH = '/api';\n\nexport const getBaseDataApi = {\n    url: `${BASE_PATH}/base-data`,\n    setFunc: ({ res }) => res,\n};\n\nexport const patchConfigApi = {\n    url: `${BASE_PATH}/config`,\n    method: 'PATCH',\n    setFunc: ({ cur, req }) => ({\n        ...cur,\n        ...req,\n    }),\n};\n\nexport const putCourtsApi = {\n    url: `${BASE_PATH}/courts`,\n    method: 'PUT',\n    setFunc: ({ req }) => req,\n};\n\nexport const postLoginApi = {\n    url: `${BASE_PATH}/login`,\n    method: 'POST',\n};\n\nexport const postLogoutApi = {\n    url: `${BASE_PATH}/logout`,\n    method: 'POST',\n};\n\nexport const getMailTemplatesApi = {\n    url: `${BASE_PATH}/mail-templates`,\n};\n\nexport const putMailTemplateApi = {\n    url: `${BASE_PATH}/mail-template/:id`,\n    method: 'PUT',\n    setFunc: ({ cur, req }) => ({\n        ...cur,\n        [req.id]: req,\n    }),\n};\n\nexport const postRegisterApi = {\n    url: `${BASE_PATH}/register`,\n    method: 'POST',\n};\n\nexport const getReservationsApi = {\n    url: `${BASE_PATH}/reservations`,\n    method: 'POST',\n    setFunc: ({ res }) => res.map(r => ({\n        ...r,\n        from: dayjs(r.from).tz(),\n        to: dayjs(r.to).tz(),\n    })),\n};\n\nexport const postReservationGroupApi = {\n    url: `${BASE_PATH}/reservation-group`,\n    method: 'POST',\n    setFunc: ({ cur, res }) => {\n        if (!res?.length)\n            return cur;\n\n        let out = [...cur];\n        if (res[0].type === RESERVATION_TYPES.DISABLE) {\n            out = out.filter(r1 => (\n                !res.some(r2 => reservationOverlap(r1, r2))\n            ));\n        }\n\n        return [\n            ...out,\n            ...res.map(r => ({\n                ...r,\n                from: dayjs(r.from).tz(),\n                to: dayjs(r.to).tz(),\n            })),\n        ]\n    },\n};\n\nexport const patchReservationGroupApi = {\n    url: `${BASE_PATH}/reservation-group/:groupId`,\n    method: 'PATCH',\n    setFunc: ({ cur, req, params }) => {\n        const groupId = params.path.groupId;\n        const reference = cur.find(r => r.groupId === groupId);\n        if (!reference)\n            return cur;\n\n        let out = [...cur];\n        if (reference.type === RESERVATION_TYPES.DISABLE) {\n            out = out.filter(r1 => (\n                !req.reservations.some(r2 => reservationOverlap(r1, r2))\n            ));\n        }\n\n        return [\n            ...out.filter(r => r.groupId !== groupId),\n            ...req.reservations.map(r => ({\n                ...reference,\n                ...r,\n                text: req.text || reference.text,\n            }))\n        ];\n    },\n};\n\n// export const deleteReservationGroupApi = {\n//     url: `${BASE_PATH}/reservation-group/:groupId`,\n//     method: 'DELETE',\n//     setFunc: ({ cur, params }) => (\n//         cur.filter(r => r.groupId !== params.path.groupId)\n//     ),\n// };\n\nexport const postSendVerifyMailApi = {\n    url: `${BASE_PATH}/send-verify-mail`,\n    method: 'POST',\n};\n\nexport const putTemplateApi = {\n    url: `${BASE_PATH}/template/:id`,\n    method: 'PUT',\n    setFunc: ({ cur, req }) => ({\n        ...cur,\n        [req.id]: req,\n    }),\n};\n\nexport const getUsersApi = {\n    url: `${BASE_PATH}/users`,\n    setFunc: ({ res }) => res.map(user => ({\n        ...user,\n        lastActivity: user.lastActivity && dayjs(user.lastActivity)\n    })),\n};\n\nexport const patchUserApi = {\n    url: `${BASE_PATH}/user/:userId`,\n    method: 'PATCH',\n    setFunc: ({ cur, req }) => {\n        if (Array.isArray(cur)) {\n            return cur.map(u => {\n                if (u.userId === req.userId)\n                    return {\n                        ...u,\n                        ...req,\n                        verified: (!req.mail || u.mail === req.mail)\n                            ? u.verified : false,\n                    };\n                return u;\n            });\n        } else {\n            return {\n                ...cur,\n                ...req,\n                verified: (!req.mail || cur.mail === req.mail)\n                    ? cur.verified : false,\n            };\n        }\n    },\n};\n\nexport const deleteUserApi = {\n    url: `${BASE_PATH}/user/:userId`,\n    method: 'DELETE',\n    setFunc: ({ cur, params }) => (\n        cur.filter(u => u.userId !== params.path.userId)\n    ),\n};\n\nexport const postVerifyMailApi = {\n    url: `${BASE_PATH}/verify-mail`,\n    method: 'POST',\n    setFunc: ({ cur }) => ({\n        ...cur,\n        verified: true,\n    }),\n};\n","import { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\n\nimport { authContext } from './AuthContext';\n\nconst defaultSetFunc = ({ res }) => res;\n\n// WARNING: function reference to 'call' changes when \n// user.token or user.userId changes\nexport function useApi(\n    {\n        url,\n        method = 'GET',\n        // res must return new state\n        // signature: ({ cur, params, req, res }) => updatedData\n        setFunc = defaultSetFunc,\n    },\n    // setData is called in any case after fetch was successful\n    // even if call was cancelled \n    setData,\n    // autoFetch can be boolean or object like { reqParams, reqData }\n    // will trigger refetch when instance changes\n    autoFetch = false,\n) {\n    const { user, logout } = useContext(authContext) || {};\n    const userToken = user?.token;\n    const [success, setSuccess] = useState(false);\n    const [status, setStatus] = useState(null);\n    const [loading, setLoading] = useState(!!autoFetch);\n    const [error, setError] = useState(null);\n    const lastCallRef = useRef(null);\n\n    // reqParams like { query: { example: 1 }, path: { id: 4 }}\n    const call = useCallback((reqParams, reqData, successCallback) => {\n        if (lastCallRef.current)\n            lastCallRef.current.cancel();\n\n        let cancelled = false;\n\n        const doFetch = async () => {\n            setSuccess(false);\n            setStatus(null);\n            setLoading(true);\n            let is401 = false;\n            try {\n                let parameterizedUrl = Object.keys(reqParams?.path || {})\n                    .reduce((acc, param) => acc.replace(`:${param}`, reqParams.path[param]), url);\n                const queryString = Object.keys(reqParams?.query || {})\n                    .map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(reqParams.query[key])}`)\n                    .join('&');\n                if (queryString)\n                    parameterizedUrl += `?${queryString}`;\n                \n                const headers = {};\n                if (userToken)\n                    headers['Authorization'] = `Bearer ${userToken}`;\n                if (reqData)\n                    headers['Content-Type'] = 'application/json';\n                \n                if (cancelled) \n                    return;\n\n                const response = await fetch(parameterizedUrl, {\n                    method,\n                    headers,\n                    body: reqData ? JSON.stringify(reqData) : undefined,\n                });\n\n                if (!cancelled)\n                    setStatus(response.status);\n\n                const resData = await response.json();\n\n                if (response.ok) {\n                    if (setData)\n                        setData(cur => setFunc({\n                            cur, \n                            params: reqParams,\n                            req: reqData, \n                            res: resData,\n                        }));\n                    if (!cancelled) {\n                        setSuccess(true);\n                        if (successCallback)\n                            successCallback();\n                    }\n                } else {\n                    if (!cancelled)\n                        setError(resData);\n                    is401 = response.status === 401;\n                }\n            } catch (err) {\n                if (!cancelled)\n                    setError(err);\n            } finally {\n                if (!cancelled)\n                    setLoading(false);\n                if (is401)\n                    logout?.();\n            }\n        };\n\n        const task = doFetch();\n        task.cancel = () => cancelled = true;\n        lastCallRef.current = task;\n        return task.cancel;\n    }, [\n        logout, // changes when user.userId changes\n        method,\n        setData,\n        setFunc,\n        url,\n        userToken,\n    ]);\n\n    useEffect(() => {\n        if (autoFetch)\n            call(autoFetch?.reqParams, autoFetch?.reqData);\n    }, [autoFetch, call])\n\n    useEffect(() => {\n        return () => lastCallRef.current?.cancel?.();\n    }, []);\n\n    return useMemo(() => ([\n        {\n            success,\n            loading,\n            error,\n            status,\n        },\n        call, // see hint at top of file\n    ]), [\n        success,\n        loading,\n        error,\n        status,\n        call,\n    ]);\n}"],"sourceRoot":""}